!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(1),t.exports=n(9)},function(t,e,n){"use strict";function i(t){t.width=g,t.height=d,document.addEventListener("keydown",function(t){return w.keydown(t)},!1),document.addEventListener("keyup",function(t){return w.keyup(t)},!1)}function o(){var t=Date.now(),e=t-k;k=t,l.innerText=Math.floor(1e3/e).toString(),y.fillStyle="#ffffff",y.fillRect(0,0,g,d),y.fillStyle="#000000",y.fillRect(0,p,g,p),M.getcontrols(w,x,e);for(var n=M.getrays(g),i=0;i<n.length;i++)for(var a=h.Ray.cast(x,M.position,null,null,n[i],20),s=0;s<a.length;s++)if(a[s].type>0){var f=r.DistanceCalc.getdistance(M.position,a[s].point),c=f*Math.cos(M.facing.angle-n[i].angle),u=Math.ceil(v/c),m=Math.floor(255-10*c),C=m.toString(16).toLowerCase(),P=Math.floor(p-u/2);y.beginPath(),y.moveTo(i,P),y.lineTo(i,d-P),y.lineWidth=2,y.strokeStyle="#"+C+C+C,y.stroke();break}requestAnimationFrame(o)}var a=n(2),r=n(3),s=n(4),h=n(5),f=n(7),c=n(8),u=document.getElementById("gamecanvas"),l=document.getElementById("fps"),y=u.getContext("2d"),g=800,d=600,p=Math.floor(d/2),v=.8*d,m=70,x=new f.Map(100),M=new c.Player({x:x.size/2,y:x.size/2},new s.Angle(0),m*Math.PI/180),w=new a.Controls,k=Date.now();x.randomize(.3),i(u),o()},function(t,e){"use strict";var n=function(){function t(){this.rotateleft=!1,this.rotateright=!1,this.forward=!1,this.backward=!1,this.run=!1,this.strafeleft=!1,this.straferight=!1}return t.prototype.mousemove=function(t){this.rotateleft=!1,this.rotateright=!1,t.movementX<0?(this.rotateleft=!0,this.rotateright=!1):t.movementX>0&&(this.rotateleft=!1,this.rotateright=!0),console.log(t.movementX)},t.prototype.keydown=function(t){37==t.keyCode&&(this.rotateleft=!0),68==t.keyCode&&(this.strafeleft=!0),39==t.keyCode&&(this.rotateright=!0),65==t.keyCode&&(this.straferight=!0),38!=t.keyCode&&87!=t.keyCode||(this.forward=!0),40!=t.keyCode&&83!=t.keyCode||(this.backward=!0),this.run=t.shiftKey},t.prototype.keyup=function(t){37==t.keyCode&&(this.rotateleft=!1),68==t.keyCode&&(this.strafeleft=!1),39==t.keyCode&&(this.rotateright=!1),65==t.keyCode&&(this.straferight=!1),38!=t.keyCode&&87!=t.keyCode||(this.forward=!1),40!=t.keyCode&&83!=t.keyCode||(this.backward=!1),this.run=t.shiftKey},t}();e.Controls=n},function(t,e){"use strict";var n=function(){function t(){}return t.getdistance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t}();e.DistanceCalc=n},function(t,e){"use strict";var n=function(){function t(t){this.angle=t,this.sin=Math.sin(t),this.cos=Math.cos(t),this.tg=this.sin/this.cos,this.ctg=this.cos/this.sin,this.dx=this.cos>0?1:0,this.dy=this.sin>0?1:0}return t}();e.Angle=n},function(t,e,n){"use strict";var i=n(6),o=function(){function t(){}return t.nearesty=function(t,e){var n=Math.floor(t.y)+e.dy;n==t.y&&(n-=1);var i=n-t.y,o=e.ctg*i;return{x:o+t.x,y:n,manhattandistance:Math.abs(o)+Math.abs(i)}},t.nearestx=function(t,e){var n=Math.floor(t.x)+e.dx;n==t.x&&(n-=1);var i=n-t.x,o=e.tg*i;return{x:n,y:o+t.y,manhattandistance:Math.abs(i)+Math.abs(o)}},t.cast=function(e,n,o,a,r,s){if(s<1)return[];var h=o||t.nearesty(n,r),f=a||t.nearestx(n,r);return h.manhattandistance<f.manhattandistance?(f.manhattandistance-=h.manhattandistance,[new i.Colision(h,e.getvalue(Math.floor(h.x),h.y-(r.dy>0?0:1)))].concat(t.cast(e,h,null,f,r,s-h.manhattandistance))):(h.manhattandistance-=f.manhattandistance,[new i.Colision(f,e.getvalue(f.x-(r.dx>0?0:1),Math.floor(f.y)))].concat(t.cast(e,f,h,null,r,s-f.manhattandistance)))},t}();e.Ray=o},function(t,e){"use strict";var n=function(){function t(t,e){this.point=t,this.type=e}return t}();e.Colision=n},function(t,e){"use strict";var n=function(){function t(t){this.map=new Uint8Array(t*t),this.size=t}return t.prototype.setvalue=function(t,e,n){var i=this.size*e+t;i<this.map.length&&i>=0&&(this.map[this.size*e+t]=n)},t.prototype.getvalue=function(t,e){if(t>=0&&e>=0&&t<this.size&&e<this.size){var n=this.size*e+t;return this.map[n]}return 0},t.prototype.randomize=function(t){for(var e=0;e<this.map.length;e++)this.map[e]=Math.random()<t?1:0},t}();e.Map=n},function(t,e,n){"use strict";var i=n(11),o=n(4),a=function(){function t(t,e,n){this.position=t,this.facing=e,this.fov=n}return t.prototype.getrays=function(t){for(var e=this.fov/t,n=this.facing.angle+this.fov/2,i=new Array,a=0;a<t;a++)i.push(new o.Angle(n)),n-=e;return i},t.prototype.rotateleft=function(t){this.facing=new o.Angle(this.facing.angle+Math.PI*t/1e3)},t.prototype.rotateright=function(t){this.facing=new o.Angle(this.facing.angle-Math.PI*t/1e3)},t.prototype.moveforward=function(t,e,n){var i={x:this.position.x+this.facing.cos*t/(n?250:500),y:this.position.y+this.facing.sin*t/(n?250:500)};0==e.getvalue(Math.floor(i.x),Math.floor(i.y))&&(this.position=i)},t.prototype.movebackward=function(t,e){var n={x:this.position.x-this.facing.cos*t/500,y:this.position.y-this.facing.sin*t/500};0==e.getvalue(Math.floor(n.x),Math.floor(n.y))&&(this.position=n)},t.prototype.strafeleft=function(t,e,n){var a=new o.Angle(this.facing.angle-i.PI0_5),r={x:this.position.x+a.cos*t/(n?250:500),y:this.position.y+a.sin*t/(n?250:500)};0==e.getvalue(Math.floor(r.x),Math.floor(r.y))&&(this.position=r)},t.prototype.straferight=function(t,e,n){var a=new o.Angle(this.facing.angle+i.PI0_5),r={x:this.position.x+a.cos*t/(n?250:500),y:this.position.y+a.sin*t/(n?250:500)};0==e.getvalue(Math.floor(r.x),Math.floor(r.y))&&(this.position=r)},t.prototype.getcontrols=function(t,e,n){t.forward&&this.moveforward(n,e,t.run),t.backward&&this.movebackward(n,e),t.rotateleft&&this.rotateleft(n),t.rotateright&&this.rotateright(n),t.strafeleft&&this.strafeleft(n,e,t.run),t.straferight&&this.straferight(n,e,t.run)},t}();e.Player=a},function(t,e){},,function(t,e){"use strict";e.PI0_5=Math.PI/2,e.PI1_0=Math.PI,e.PI1_5=3*Math.PI/2,e.PI2_0=2*Math.PI}]);
//# sourceMappingURL=app.bundle.js.map