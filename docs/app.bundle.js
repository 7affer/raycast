!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){o(1),t.exports=o(10)},function(t,e,o){"use strict";function n(t){t.width=l,t.height=y,t.style.width=l+"px",t.style.height=y+"px",document.addEventListener("keydown",function(t){return P.keydown(t)},!1),document.addEventListener("keyup",function(t){return P.keyup(t)},!1),t.addEventListener("click",function(e){t.requestPointerLock=t.requestPointerLock,t.requestPointerLock()},!1),document.addEventListener("pointerlockchange",i,!1)}function i(){document.pointerLockElement===v?document.addEventListener("mousemove",I,!1):document.removeEventListener("mousemove",I,!1)}function s(){var t=Date.now(),e=t-b;b=t,x.innerText=Math.floor(1e3/e).toString(),M.fillStyle="#ffffff",M.fillRect(0,0,l,y),M.fillStyle="#000000",M.fillRect(0,d,l,d),C.getcontrols(P,k,e);for(var o=C.getrays(l),n=0;n<o.length;n++)for(var i=f.Ray.cast(k,C.position,null,null,o[n],m),a=0;a<i.length;a++)if(i[a].type>0){var h=r.DistanceCalc.getdistance(C.position,i[a].point),c=h*Math.cos(C.facing.angle-o[n].angle),u=Math.ceil(g/c),p=Math.floor(255-10*c),v=p.toString(16).toLowerCase(),w=Math.floor(d-u/2);M.beginPath(),M.moveTo(n,w),M.lineTo(n,y-w),M.lineWidth=2,M.strokeStyle="#"+v+v+v,M.stroke();break}requestAnimationFrame(s)}var a=o(2),r=o(3),h=o(4),f=o(5),c=o(7),u=o(8),l=800,y=600,d=Math.floor(y/2),g=.8*y,p=70,m=30,v=document.getElementById("gamecanvas"),x=document.getElementById("fps"),M=v.getContext("2d"),k=new c.Map(100);k.randomize(.3);for(var w={x:k.size/2+.25,y:k.size/2+.25};k.getvalue(Math.floor(w.x),Math.floor(w.y))>0;)w.x+=1;var C=new u.Player(w,new h.Angle(0),p*Math.PI/180),P=new a.Controls,I=function(t){return P.mousemove(t)},b=Date.now();n(v),s()},function(t,e){"use strict";var o=function(){function t(){this.rotateleft=!1,this.rotateright=!1,this.forward=!1,this.backward=!1,this.run=!1,this.strafeleft=!1,this.straferight=!1,this.mouserotateleft=!1,this.mouserotateright=!1}return t.prototype.mousemove=function(t){t.movementX<0?(this.mouserotateleft=!0,this.mouserotateright=!1):t.movementX>0&&(this.mouserotateleft=!1,this.mouserotateright=!0)},t.prototype.resetmouserotate=function(){this.mouserotateleft=!1,this.mouserotateright=!1},t.prototype.keydown=function(t){37==t.keyCode&&(this.rotateleft=!0),68==t.keyCode&&(this.strafeleft=!0),39==t.keyCode&&(this.rotateright=!0),65==t.keyCode&&(this.straferight=!0),38!=t.keyCode&&87!=t.keyCode||(this.forward=!0),40!=t.keyCode&&83!=t.keyCode||(this.backward=!0),this.run=t.shiftKey},t.prototype.keyup=function(t){37==t.keyCode&&(this.rotateleft=!1),68==t.keyCode&&(this.strafeleft=!1),39==t.keyCode&&(this.rotateright=!1),65==t.keyCode&&(this.straferight=!1),38!=t.keyCode&&87!=t.keyCode||(this.forward=!1),40!=t.keyCode&&83!=t.keyCode||(this.backward=!1),this.run=t.shiftKey},t}();e.Controls=o},function(t,e){"use strict";var o=function(){function t(){}return t.getdistance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t}();e.DistanceCalc=o},function(t,e){"use strict";var o=function(){function t(t){this.angle=t,this.sin=Math.sin(t),this.cos=Math.cos(t),this.tg=this.sin/this.cos,this.ctg=this.cos/this.sin,this.dx=this.cos>0?1:0,this.dy=this.sin>0?1:0}return t}();e.Angle=o},function(t,e,o){"use strict";var n=o(6),i=function(){function t(){}return t.nearesty=function(t,e){var o=Math.floor(t.y)+e.dy;o==t.y&&(o-=1);var n=o-t.y,i=e.ctg*n;return{x:i+t.x,y:o,manhattandistance:Math.abs(i)+Math.abs(n)}},t.nearestx=function(t,e){var o=Math.floor(t.x)+e.dx;o==t.x&&(o-=1);var n=o-t.x,i=e.tg*n;return{x:o,y:i+t.y,manhattandistance:Math.abs(n)+Math.abs(i)}},t.cast=function(e,o,i,s,a,r){if(r<1)return[];var h=i||t.nearesty(o,a),f=s||t.nearestx(o,a);return h.manhattandistance<f.manhattandistance?(f.manhattandistance-=h.manhattandistance,[new n.Colision(h,e.getvalue(Math.floor(h.x),h.y-(a.dy>0?0:1)))].concat(t.cast(e,h,null,f,a,r-h.manhattandistance))):(h.manhattandistance-=f.manhattandistance,[new n.Colision(f,e.getvalue(f.x-(a.dx>0?0:1),Math.floor(f.y)))].concat(t.cast(e,f,h,null,a,r-f.manhattandistance)))},t}();e.Ray=i},function(t,e){"use strict";var o=function(){function t(t,e){this.point=t,this.type=e}return t}();e.Colision=o},function(t,e){"use strict";var o=function(){function t(t){this.map=new Uint8Array(t*t),this.size=t}return t.prototype.setvalue=function(t,e,o){var n=this.size*e+t;n<this.map.length&&n>=0&&(this.map[this.size*e+t]=o)},t.prototype.getvalue=function(t,e){if(t>=0&&e>=0&&t<this.size&&e<this.size){var o=this.size*e+t;return this.map[o]}return 0},t.prototype.randomize=function(t){for(var e=0;e<this.map.length;e++)this.map[e]=Math.random()<t?1:0},t}();e.Map=o},function(t,e,o){"use strict";var n=o(9),i=o(4),s=function(){function t(t,e,o){this.position=t,this.facing=e,this.fov=o}return t.prototype.getrays=function(t){for(var e=this.fov/t,o=this.facing.angle+this.fov/2,n=new Array,s=0;s<t;s++)n.push(new i.Angle(o)),o-=e;return n},t.prototype.rotateleft=function(t){this.facing=new i.Angle(this.facing.angle+Math.PI*t/1200)},t.prototype.rotateright=function(t){this.facing=new i.Angle(this.facing.angle-Math.PI*t/1200)},t.prototype.moveforward=function(t,e,o){var n={x:this.position.x+this.facing.cos*t/(o?250:500),y:this.position.y+this.facing.sin*t/(o?250:500)};0==e.getvalue(Math.floor(n.x),Math.floor(n.y))?this.position=n:0==e.getvalue(Math.floor(n.x),Math.floor(this.position.y))?(n.y=this.position.y,this.position=n):0==e.getvalue(Math.floor(this.position.x),Math.floor(n.y))&&(n.x=this.position.x,this.position=n)},t.prototype.movebackward=function(t,e){var o={x:this.position.x-this.facing.cos*t/500,y:this.position.y-this.facing.sin*t/500};0==e.getvalue(Math.floor(o.x),Math.floor(o.y))&&(this.position=o)},t.prototype.strafeleft=function(t,e,o){var s=new i.Angle(this.facing.angle-n.PI0_5),a={x:this.position.x+s.cos*t/(o?250:500),y:this.position.y+s.sin*t/(o?250:500)};0==e.getvalue(Math.floor(a.x),Math.floor(a.y))&&(this.position=a)},t.prototype.straferight=function(t,e,o){var s=new i.Angle(this.facing.angle+n.PI0_5),a={x:this.position.x+s.cos*t/(o?250:500),y:this.position.y+s.sin*t/(o?250:500)};0==e.getvalue(Math.floor(a.x),Math.floor(a.y))&&(this.position=a)},t.prototype.getcontrols=function(t,e,o){t.forward&&this.moveforward(o,e,t.run),t.backward&&this.movebackward(o,e),(t.rotateleft||t.mouserotateleft)&&this.rotateleft(o),(t.rotateright||t.mouserotateright)&&this.rotateright(o),t.strafeleft&&this.strafeleft(o,e,t.run),t.straferight&&this.straferight(o,e,t.run),t.resetmouserotate()},t}();e.Player=s},function(t,e){"use strict";e.PI0_5=Math.PI/2,e.PI1_0=Math.PI,e.PI1_5=3*Math.PI/2,e.PI2_0=2*Math.PI},function(t,e){}]);
//# sourceMappingURL=app.bundle.js.map