!function(t){function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){e(1),t.exports=e(9)},function(t,n,e){"use strict";function i(t){t.width=d,t.height=g,document.addEventListener("keydown",function(t){return w.keydown(t)},!1),document.addEventListener("keyup",function(t){return w.keyup(t)},!1)}function o(){var t=Date.now(),n=t-k;k=t,l.innerText=Math.floor(1e3/n).toString(),y.fillStyle="#ffffff",y.fillRect(0,0,d,g),y.fillStyle="#000000",y.fillRect(0,p,d,p),m.getcontrols(w,M,n);for(var e=m.getrays(d),i=0;i<e.length;i++)for(var a=h.Ray.cast(M,m.position,null,null,e[i],20),r=0;r<a.length;r++)if(a[r].type>0){var f=s.DistanceCalc.getdistance(m.position,a[r].point),c=f*Math.cos(m.facing.angle-e[i].angle),u=Math.ceil(v/c),x=Math.floor(255-10*c),C=x.toString(16).toLowerCase(),P=Math.floor(p-u/2);y.beginPath(),y.moveTo(i,P),y.lineTo(i,g-P),y.lineWidth=2,y.strokeStyle="#"+C+C+C,y.stroke();break}requestAnimationFrame(o)}var a=e(2),s=e(3),r=e(4),h=e(5),f=e(7),c=e(8),u=document.getElementById("gamecanvas"),l=document.getElementById("fps"),y=u.getContext("2d"),d=800,g=600,p=Math.floor(g/2),v=.8*g,x=70,M=new f.Map(100),m=new c.Player({x:M.size/2,y:M.size/2},new r.Angle(0),x*Math.PI/180),w=new a.Controls,k=Date.now();M.randomize(.3),i(u),o()},function(t,n){"use strict";var e=function(){function t(){this.rotateleft=!1,this.rotateright=!1,this.forward=!1,this.backward=!1,this.run=!1,this.strafeleft=!1,this.straferight=!1}return t.prototype.keydown=function(t){37==t.keyCode&&(this.rotateleft=!0),68==t.keyCode&&(this.strafeleft=!0),39==t.keyCode&&(this.rotateright=!0),65==t.keyCode&&(this.straferight=!0),38!=t.keyCode&&87!=t.keyCode||(this.forward=!0),40!=t.keyCode&&83!=t.keyCode||(this.backward=!0),this.run=t.shiftKey},t.prototype.keyup=function(t){37==t.keyCode&&(this.rotateleft=!1),68==t.keyCode&&(this.strafeleft=!1),39==t.keyCode&&(this.rotateright=!1),65==t.keyCode&&(this.straferight=!1),38!=t.keyCode&&87!=t.keyCode||(this.forward=!1),40!=t.keyCode&&83!=t.keyCode||(this.backward=!1),this.run=t.shiftKey},t}();n.Controls=e},function(t,n){"use strict";var e=function(){function t(){}return t.getdistance=function(t,n){return Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))},t}();n.DistanceCalc=e},function(t,n){"use strict";var e=function(){function t(t){this.angle=t,this.sin=Math.sin(t),this.cos=Math.cos(t),this.tg=this.sin/this.cos,this.ctg=this.cos/this.sin,this.dx=this.cos>0?1:0,this.dy=this.sin>0?1:0}return t}();n.Angle=e},function(t,n,e){"use strict";var i=e(6),o=function(){function t(){}return t.nearesty=function(t,n){var e=Math.floor(t.y)+n.dy;e==t.y&&(e-=1);var i=e-t.y,o=n.ctg*i;return{x:o+t.x,y:e,manhattandistance:Math.abs(o)+Math.abs(i)}},t.nearestx=function(t,n){var e=Math.floor(t.x)+n.dx;e==t.x&&(e-=1);var i=e-t.x,o=n.tg*i;return{x:e,y:o+t.y,manhattandistance:Math.abs(i)+Math.abs(o)}},t.cast=function(n,e,o,a,s,r){if(r<1)return[];var h=o||t.nearesty(e,s),f=a||t.nearestx(e,s);return h.manhattandistance<f.manhattandistance?(f.manhattandistance-=h.manhattandistance,[new i.Colision(h,n.getvalue(Math.floor(h.x),h.y-(s.dy>0?0:1)))].concat(t.cast(n,h,null,f,s,r-h.manhattandistance))):(h.manhattandistance-=f.manhattandistance,[new i.Colision(f,n.getvalue(f.x-(s.dx>0?0:1),Math.floor(f.y)))].concat(t.cast(n,f,h,null,s,r-f.manhattandistance)))},t}();n.Ray=o},function(t,n){"use strict";var e=function(){function t(t,n){this.point=t,this.type=n}return t}();n.Colision=e},function(t,n){"use strict";var e=function(){function t(t){this.map=new Uint8Array(t*t),this.size=t}return t.prototype.setvalue=function(t,n,e){var i=this.size*n+t;i<this.map.length&&i>=0&&(this.map[this.size*n+t]=e)},t.prototype.getvalue=function(t,n){if(t>=0&&n>=0&&t<this.size&&n<this.size){var e=this.size*n+t;return this.map[e]}return 0},t.prototype.randomize=function(t){for(var n=0;n<this.map.length;n++)this.map[n]=Math.random()<t?1:0},t}();n.Map=e},function(t,n,e){"use strict";var i=e(11),o=e(4),a=function(){function t(t,n,e){this.position=t,this.facing=n,this.fov=e}return t.prototype.getrays=function(t){for(var n=this.fov/t,e=this.facing.angle+this.fov/2,i=new Array,a=0;a<t;a++)i.push(new o.Angle(e)),e-=n;return i},t.prototype.rotateleft=function(t){this.facing=new o.Angle(this.facing.angle+Math.PI*t/1e3)},t.prototype.rotateright=function(t){this.facing=new o.Angle(this.facing.angle-Math.PI*t/1e3)},t.prototype.moveforward=function(t,n,e){var i={x:this.position.x+this.facing.cos*t/(e?250:500),y:this.position.y+this.facing.sin*t/(e?250:500)};0==n.getvalue(Math.floor(i.x),Math.floor(i.y))&&(this.position=i)},t.prototype.movebackward=function(t,n){var e={x:this.position.x-this.facing.cos*t/500,y:this.position.y-this.facing.sin*t/500};0==n.getvalue(Math.floor(e.x),Math.floor(e.y))&&(this.position=e)},t.prototype.strafeleft=function(t,n,e){var a=new o.Angle(this.facing.angle-i.PI0_5),s={x:this.position.x+a.cos*t/(e?250:500),y:this.position.y+a.sin*t/(e?250:500)};0==n.getvalue(Math.floor(s.x),Math.floor(s.y))&&(this.position=s)},t.prototype.straferight=function(t,n,e){var a=new o.Angle(this.facing.angle+i.PI0_5),s={x:this.position.x+a.cos*t/(e?250:500),y:this.position.y+a.sin*t/(e?250:500)};0==n.getvalue(Math.floor(s.x),Math.floor(s.y))&&(this.position=s)},t.prototype.getcontrols=function(t,n,e){t.forward&&this.moveforward(e,n,t.run),t.backward&&this.movebackward(e,n),t.rotateleft&&this.rotateleft(e),t.rotateright&&this.rotateright(e),t.strafeleft&&this.strafeleft(e,n,t.run),t.straferight&&this.straferight(e,n,t.run)},t}();n.Player=a},function(t,n){},,function(t,n){"use strict";n.PI0_5=Math.PI/2,n.PI1_0=Math.PI,n.PI1_5=3*Math.PI/2,n.PI2_0=2*Math.PI}]);
//# sourceMappingURL=app.bundle.js.map