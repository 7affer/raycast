!function(t){function e(i){if(s[i])return s[i].exports;var n=s[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var s={};return e.m=t,e.c=s,e.p="",e(0)}([function(t,e,s){s(1),t.exports=s(14)},function(t,e,s){"use strict";var i=s(2),n=s(3),o=s(9),a=s(5),r=s(10),h=s(12),l=document.getElementById("fps"),c=window.innerWidth<1024?window.innerWidth:1024,d={width:c,height:Math.floor(c/1.8),fov:70*Math.PI/180,drawingdistance:20,floorcolor1:"#3D2F2D",floorcolor2:"#261311"},u=new i.AssetLoader;u.loadall(function(t){return document.getElementById("loading").innerHTML="Loading: "+Math.ceil(100*t)+"%"},function(){function t(){var e=Date.now(),s=e-p;p=e,g.getcontrols(c,i,s),f.renderframe(s,i,g,d.fov),requestAnimationFrame(t),l.innerText=Math.floor(1e3/s).toString()}document.getElementById("loading-container").style.display="none";var e=document.getElementById("gamecanvas"),s=e.getContext("2d"),i=new r.Map(150,.3,u),c=new o.Controls,g=new h.Player(i.size/2+.25,i.size/2+.25,new a.Angle(0),u),f=new n.Scene(s,d,u);e.width=d.width,e.height=d.height,e.style.width=d.width+"px",e.style.height=d.height+"px",c.bindevents(document,e),g.initonmap(i);var p=Date.now();t()})},function(t,e){"use strict";var s=function(){function t(){this.loaded=0,this.mobilecheck=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},this.wallssrcs=["./assets/walls/wall1.jpg","./assets/walls/wall2.jpg","./assets/walls/wall3.jpg","./assets/walls/wall4.jpg","./assets/walls/wall5.jpg","./assets/walls/wall1b.jpg","./assets/walls/wall2b.jpg","./assets/walls/wall3b.jpg","./assets/walls/wall4b.jpg","./assets/walls/wall5b.jpg","./assets/walls/wall1c.jpg","./assets/walls/wall2c.jpg","./assets/walls/wall3c.jpg","./assets/walls/wall4c.jpg","./assets/walls/wall5c.jpg"],this.spritessrcs=["./assets/sprites/sprite1.png","./assets/sprites/sprite2.png","./assets/sprites/sprite3.png","./assets/sprites/sprite4.png","./assets/sprites/sprite5.png"],this.zspritessrcs=["./assets/sprites/zombie1.png","./assets/sprites/zombie2.png","./assets/sprites/zombie3.png","./assets/sprites/zombie4.png"],this.skylinesrcs=["./assets/sprites/skyline.jpg"],this.soundssrcs=["./assets/sounds/gun.mp3"],this.sprites=new Array,this.zsprites=new Array,this.walls=new Array,this.skyline=new Array,this.sounds=new Array}return t.prototype.toload=function(){return this.walls.length+this.sprites.length+this.zsprites.length+this.skyline.length+(this.mobilecheck()?0:this.sounds.length)},t.prototype.loadimages=function(t,e,s,i){var n=this,o=function(o){e.push(new Image),e[o].onload=function(){s(++n.loaded/n.toload()),n.loaded>=n.toload()&&i(),console.log("loaded "+e[o])},e[o].src=t[o]};for(var a in t)o(a)},t.prototype.loadaudio=function(t,e,s,i){var n=this,o=function(o){e.push(new Audio),e[o].oncanplaythrough=function(){s(++n.loaded/n.toload()),n.loaded>=n.toload()&&i(),console.log("loaded "+e[o])},e[o].src=t[o]};for(var a in t)o(a)},t.prototype.loadall=function(t,e){this.loadimages(this.wallssrcs,this.walls,t,e),this.loadimages(this.spritessrcs,this.sprites,t,e),this.loadimages(this.zspritessrcs,this.zsprites,t,e),this.loadimages(this.skylinesrcs,this.skyline,t,e),this.loadaudio(this.soundssrcs,this.sounds,t,e);var s=new Audio;s.onload=function(){}},t}();e.AssetLoader=s},function(t,e,s){"use strict";var i=s(4),n=s(5),o=s(6),a=s(8),r=function(){function t(t,e,s){this.ctx=t,this.settings=e,this.assets=s,this.lastrender=Date.now(),this.height2=Math.floor(e.height/2),this.wallheight=Math.floor(.8*e.height)}return t.prototype.renderbackground=function(t,e){var s=this.assets.skyline[0],n=4*Math.PI,o=(i.PI2_0-(t.facing.angle+e/2))/n*s.width;o=Math.abs(o),o=Math.floor(o);var a=Math.floor(s.width*e/n),r=Math.floor(.5*this.settings.height);this.ctx.drawImage(s,o,0,a,s.height,0,0,this.settings.width,r),this.ctx.fillStyle=this.settings.floorcolor1,this.ctx.fillRect(0,this.height2,this.settings.width,this.settings.height)},t.prototype.renderwall=function(t,e,s,i){var n=Math.ceil(this.wallheight/e),o=Math.floor(this.height2-n/2),a=Math.floor(i*s.width),r=.7*this.settings.drawingdistance;this.ctx.drawImage(s,a,0,1,s.height,t,o,1,n),t%3==0&&(this.ctx.beginPath(),this.ctx.moveTo(t,o),this.ctx.lineTo(t,this.settings.height-o),this.ctx.lineWidth=4,this.ctx.strokeStyle="#000000",this.ctx.fillStyle="#000000",this.ctx.globalAlpha=Math.min(e,r)/r,this.ctx.stroke(),this.ctx.globalAlpha=1)},t.prototype.drawwall=function(t,e,s,i){var n=s.x-Math.floor(s.x),o=s.y-Math.floor(s.y),a=Math.abs(n>o?n:o);e<3?this.renderwall(t,e,this.assets.walls[s.type-1],a):e<8?this.renderwall(t,e,this.assets.walls[s.type-1+5],a):this.renderwall(t,e,this.assets.walls[s.type-1+10],a)},t.prototype.drawobject=function(t){var e=Math.ceil(this.wallheight/t.distance),s=Math.floor(this.height2+e/2),i=Math.floor(t.starttexture*t.image.width),n=Math.floor(t.endtexture*t.image.width),o=Math.floor(.4*e),a=Math.max(1,n-i),r=s-o,h=Math.max(1,t.end-t.start);this.ctx.drawImage(t.image,i,0,a,t.image.height,t.start,r,h,o)},t.prototype.drawfloor=function(t,e,s,i){var n=Math.ceil(this.wallheight/e),o=Math.floor(this.settings.height-(this.height2-n/2));return i&&t%3==0&&(this.ctx.beginPath(),this.ctx.moveTo(t,s),this.ctx.lineTo(t,o),this.ctx.lineWidth=3,this.ctx.strokeStyle=this.settings.floorcolor2,this.ctx.stroke()),o},t.prototype.filterobjectsinrange=function(t,e){for(var s=new Array,i=0;i<e.length;i++)Math.abs(t.x-e[i].x)<this.settings.drawingdistance&&Math.abs(t.y-e[i].y)<this.settings.drawingdistance&&(e[i].angle=n.Angle.normalizeangle(Math.atan2(e[i].y-t.y,e[i].x-t.x)),s.push(e[i]));return s},t.prototype.getobjectstodraw=function(t,e,s,n,o){for(var r=new Array,h=0,l=e;h<l.length;h++){var c=l[h];if(c.distance=a.DistanceCalc.getdistance(t,c),c.distance<this.settings.drawingdistance&&c.distance<o){c.distance<.25&&(c.distance=.25),s.angle>i.PI1_5&&(s.angle-=i.PI2_0),c.angle>i.PI1_5&&(c.angle-=i.PI2_0);var d=(s.angle-c.angle)/(2*Math.atan2(.05,c.distance));Math.abs(d)<=1&&(d=Math.abs(.5*(d-1)),c.start<0&&(c.start=n,c.starttexture=d),c.end=n,c.endtexture=d,r.push(c))}}return r},t.prototype.renderframe=function(t,e,s,i){this.renderbackground(s,i);for(var n=new Array,r=this.filterobjectsinrange(s,e.sprites),h=this.filterobjectsinrange(s,e.zombies),l=s.getrays(this.settings.width,this.settings.fov),c=(Math.floor(s.x)+Math.floor(s.y))%2==0,d=0;d<l.length;d++){for(var u=this.settings.height,g=c,f=void 0,p=Math.cos(s.facing.angle-l[d].angle),m=o.Ray.cast(e,s,null,null,l[d],this.settings.drawingdistance),w=0,y=m;w<y.length;w++){var v=y[w],x=a.DistanceCalc.getdistance(s,v)*p;v.type>0&&(f=x,this.drawwall(d,x,v,s)),u=this.drawfloor(d,x,u,g),g=!g}var k=this.getobjectstodraw(s,r,l[d],d,f),b=this.getobjectstodraw(s,h,l[d],d,f);n=k.concat(b)}for(var M=0,z=r;M<z.length;M++){var A=z[M];A.start>=0&&this.drawobject(A),A.start=-1}for(var P=0,C=h;P<C.length;P++){var A=C[P];A.start>=0&&this.drawobject(A),A.start=-1}},t}();e.Scene=r},function(t,e){"use strict";e.PI0_5=Math.PI/2,e.PI1_0=Math.PI,e.PI1_5=3*Math.PI/2,e.PI2_0=2*Math.PI},function(t,e,s){"use strict";var i=s(4),n=function(){function t(e){this.angle=t.normalizeangle(e),this.sin=Math.sin(e),this.cos=Math.cos(e),this.tg=this.sin/this.cos,this.ctg=this.cos/this.sin,this.dx=this.cos>0?1:0,this.dy=this.sin>0?1:0}return t.normalizeangle=function(t){return t<0&&(t+=i.PI2_0),t>i.PI2_0&&(t-=i.PI2_0),t},t}();e.Angle=n},function(t,e,s){"use strict";var i=s(7),n=function(){function t(){}return t.nearesty=function(t,e){var s=Math.floor(t.y+e.dy);s==t.y&&(s-=1);var i=s-t.y,n=e.ctg*i;return{x:n+t.x,y:s,manhattandistance:Math.abs(n)+Math.abs(i)}},t.nearestx=function(t,e){var s=Math.floor(t.x+e.dx);s==t.x&&(s-=1);var i=s-t.x,n=e.tg*i;return{x:s,y:n+t.y,manhattandistance:Math.abs(i)+Math.abs(n)}},t.cast=function(e,s,n,o,a,r){if(r<1)return[];var h=n||t.nearesty(s,a),l=o||t.nearestx(s,a);if(h.manhattandistance<l.manhattandistance){l.manhattandistance-=h.manhattandistance;var c=e.getvalue(Math.floor(h.x),h.y-(a.dy>0?0:1));return c>0?[new i.Colision(h.x,h.y,c)]:[new i.Colision(h.x,h.y,c)].concat(t.cast(e,h,null,l,a,r-h.manhattandistance))}h.manhattandistance-=l.manhattandistance;var c=e.getvalue(l.x-(a.dx>0?0:1),Math.floor(l.y));return c>0?[new i.Colision(l.x,l.y,c)]:[new i.Colision(l.x,l.y,c)].concat(t.cast(e,l,h,null,a,r-l.manhattandistance))},t}();e.Ray=n},function(t,e){"use strict";var s=function(){function t(t,e,s){this.x=t,this.y=e,this.type=s}return t}();e.Colision=s},function(t,e){"use strict";var s=function(){function t(){}return t.getdistance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t}();e.DistanceCalc=s},function(t,e){"use strict";var s=function(){function t(){var t=this;this.rotateleft=!1,this.rotateright=!1,this.forward=!1,this.backward=!1,this.run=!1,this.strafeleft=!1,this.straferight=!1,this.mouserotateleft=0,this.mouserotateright=0,this.shoot=!1,this.mousemovefunction=function(e){return t.mousemove(e)}}return t.prototype.mousemove=function(t){t.movementX<0?(this.mouserotateleft=-t.movementX/5,this.mouserotateright=0):t.movementX>0&&(this.mouserotateleft=0,this.mouserotateright=t.movementX/5)},t.prototype.resetmouserotate=function(){this.mouserotateleft=0,this.mouserotateright=0},t.prototype.keydown=function(t){17==t.keyCode&&(this.shoot=!0),37==t.keyCode&&(this.rotateleft=!0),68==t.keyCode&&(this.strafeleft=!0),39==t.keyCode&&(this.rotateright=!0),65==t.keyCode&&(this.straferight=!0),38!=t.keyCode&&87!=t.keyCode||(this.forward=!0),40!=t.keyCode&&83!=t.keyCode||(this.backward=!0),this.run=t.shiftKey},t.prototype.touchstart=function(t,e){var s=t.touches[0];this.touchend(t),s.pageY<.5*e.height?this.shoot=!0:s.pageX<.333*window.innerWidth?this.rotateleft=!0:s.pageX<.666*window.innerWidth?this.forward=!0:this.rotateright=!0,t.preventDefault(),t.stopPropagation()},t.prototype.touchend=function(t){this.rotateleft=!1,this.rotateright=!1,this.forward=!1,t.preventDefault(),t.stopPropagation()},t.prototype.keyup=function(t){37==t.keyCode&&(this.rotateleft=!1),68==t.keyCode&&(this.strafeleft=!1),39==t.keyCode&&(this.rotateright=!1),65==t.keyCode&&(this.straferight=!1),38!=t.keyCode&&87!=t.keyCode||(this.forward=!1),40!=t.keyCode&&83!=t.keyCode||(this.backward=!1),this.run=t.shiftKey},t.prototype.bindevents=function(t,e){var s=this;t.addEventListener("keydown",function(t){return s.keydown(t)},!1),t.addEventListener("keyup",function(t){return s.keyup(t)},!1),t.addEventListener("pointerlockchange",function(i){s.lockChangeAlert(t,e)},!1),t.addEventListener("mozpointerlockchange",function(i){s.lockChangeAlert(t,e)},!1),e.addEventListener("touchstart",function(t){s.touchstart(t,e)},!1),e.addEventListener("touchend",function(t){s.touchend(t)},!1),e.addEventListener("click",function(t){e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.requestPointerLock(),s.shoot=!0},!1)},t.prototype.lockChangeAlert=function(t,e){var s=document.getElementById("gamecanvas");t.pointerLockElement===s||document.mozPointerLockElement===e?t.addEventListener("mousemove",this.mousemovefunction,!1):t.removeEventListener("mousemove",this.mousemovefunction,!1)},t}();e.Controls=s},function(t,e,s){"use strict";var i=s(11),n=function(){function t(t,e,s){this.map=new Uint8Array(t*t),this.size=t,this.randomize(e),this.sprites=new Array;for(var n=0;n<25*t;n++)this.sprites.push(new i.Sprite(Math.random()*t,Math.random()*t,s.sprites[Math.floor(Math.random()*s.sprites.length)]));this.zombies=new Array;for(var n=0;n<25*t;n++)this.zombies.push(new i.Sprite(Math.random()*t,Math.random()*t,s.zsprites[Math.floor(Math.random()*s.zsprites.length)]))}return t.prototype.setvalue=function(t,e,s){var i=this.size*e+t;i<this.map.length&&i>=0&&(this.map[this.size*e+t]=s)},t.prototype.getvalue=function(t,e){if(t>=0&&e>=0&&t<this.size&&e<this.size){var s=this.size*e+t;return this.map[s]}return 0},t.prototype.randomize=function(t){for(var e=0;e<this.map.length;e++)Math.random()<t?Math.random()<.1?this.map[e]=5:Math.random()<.1?this.map[e]=4:Math.random()<.3?this.map[e]=3:Math.random()<.5?this.map[e]=2:this.map[e]=1:this.map[e]=0},t}();e.Map=n},function(t,e){"use strict";var s=function(){function t(t,e,s){this.x=t,this.y=e,this.image=s,this.start=-1}return t}();e.Sprite=s},function(t,e,s){"use strict";var i=s(13),n=s(4),o=s(5),a=function(){function t(t,e,s,n){this.x=t,this.y=e,this.facing=s,this.loader=n,this.guncooldown=0,null!=n&&(this.mixer=new i.Mixer(n))}return t.prototype.getrays=function(t,e){for(var s=e/t,i=this.facing.angle+e/2,n=new Array,a=0;a<t;a++)n.push(new o.Angle(i)),i-=s;return n},t.prototype.shoot=function(){var t=(new Date).getTime();this.guncooldown<t&&(this.mixer.playsound(0),this.guncooldown=t+750)},t.prototype.rotateleft=function(t,e){this.facing=new o.Angle(this.facing.angle+Math.PI*e*t/1200)},t.prototype.rotateright=function(t,e){this.facing=new o.Angle(this.facing.angle-Math.PI*e*t/1200)},t.prototype.correctposition=function(t,e){t.getvalue(Math.floor(e.x),Math.floor(this.y))>0&&(e.x=this.x),t.getvalue(Math.floor(this.x),Math.floor(e.y))>0&&(e.y=this.y),this.x=e.x,this.y=e.y},t.prototype.moveforward=function(t,e,s){var i={x:this.x+this.facing.cos*t/(s?250:500),y:this.y+this.facing.sin*t/(s?250:500)};this.correctposition(e,i)},t.prototype.movebackward=function(t,e){this.correctposition(e,{x:this.x-this.facing.cos*t/500,y:this.y-this.facing.sin*t/500})},t.prototype.strafeleft=function(t,e,s){var i=new o.Angle(this.facing.angle-n.PI0_5);this.correctposition(e,{x:this.x+i.cos*t/(s?250:500),y:this.y+i.sin*t/(s?250:500)})},t.prototype.straferight=function(t,e,s){var i=new o.Angle(this.facing.angle+n.PI0_5);this.correctposition(e,{x:this.x+i.cos*t/(s?250:500),y:this.y+i.sin*t/(s?250:500)})},t.prototype.initonmap=function(t){for(;t.getvalue(Math.floor(this.x),Math.floor(this.y))>0;)this.x+=1},t.prototype.getcontrols=function(t,e,s){t.forward&&this.moveforward(s,e,t.run),t.backward&&this.movebackward(s,e),t.rotateleft&&this.rotateleft(s,1),t.rotateright&&this.rotateright(s,1),t.mouserotateleft&&this.rotateleft(s,t.mouserotateleft),t.mouserotateright&&this.rotateright(s,t.mouserotateright),t.strafeleft&&this.strafeleft(s,e,t.run),t.straferight&&this.straferight(s,e,t.run),t.shoot&&(this.shoot(),t.shoot=!1),t.resetmouserotate()},t}();e.Player=a},function(t,e){"use strict";var s=function(){function t(t){this.maxchannels=32,this.loader=t,this.audiochannels=new Array;for(var e=0;e<this.maxchannels;e++)this.audiochannels[e]=new i,this.audiochannels[e].audioel=new Audio,this.audiochannels[e].finish=-1}return t.prototype.playsound=function(t){for(var e=0;e<this.audiochannels.length;e++){var s=new Date,i=s.getTime();if(console.log(this.loader.sounds[t].duration),this.audiochannels[e].finish<i){this.audiochannels[e].finish=i+1e3*this.loader.sounds[t].duration,this.audiochannels[e].audioel.src=this.loader.sounds[t].src,this.audiochannels[e].audioel.play();break}}},t}();e.Mixer=s;var i=function(){function t(){}return t}()},function(t,e){}]);
//# sourceMappingURL=app.bundle.js.map