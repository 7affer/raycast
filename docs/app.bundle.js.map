{"version":3,"sources":["webpack:///app.bundle.js","webpack:///webpack/bootstrap c10fde7d159003b50365","webpack:///./src/main.ts","webpack:///./src/controls.ts","webpack:///./src/distancecalc.ts","webpack:///./src/angle.ts","webpack:///./src/ray.ts","webpack:///./src/colision.ts","webpack:///./src/map.ts","webpack:///./src/player.ts","webpack:///./src/mathconst.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","initctx","canvas","width","WIDTH","height","HEIGHT","document","addEventListener","e","controls","keydown","keyup","render","now","Date","delta","lastRender","fps","innerText","Math","floor","toString","ctx","fillStyle","fillRect","HEIGHT2","player","getcontrols","map","rays","getrays","r","length","colisions","ray_1","Ray","cast","position","type","distance","distancecalc_1","DistanceCalc","getdistance","point","distancecorrected","cos","facing","angle","ceil","WALLHEIGHT","color","colorhex","toLowerCase","top_1","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","requestAnimationFrame","controls_1","angle_1","map_1","player_1","canvaselement","getElementById","getContext","FOV","Map","Player","x","size","y","Angle","PI","Controls","randomize","this","rotateleft","rotateright","forward","backward","run","strafeleft","straferight","prototype","mousemove","movementX","console","log","keyCode","shiftKey","a","b","sqrt","sin","tg","ctg","dx","dy","colision_1","nearesty","origin","nexty","manhattandistance","abs","nearestx","nextx","nexth","nextv","maxdistance","h","v","Colision","getvalue","concat","Uint8Array","setvalue","value","pos","factor","i","random","mathconst_1","fov","columns","step","Array","push","moveforward","movebackward","newfacing","PI0_5","PI1_0","PI1_5","PI2_0"],"mappings":"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","file":"app.bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(1);\n\tmodule.exports = __webpack_require__(9);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar controls_1 = __webpack_require__(2);\r\n\tvar distancecalc_1 = __webpack_require__(3);\r\n\tvar angle_1 = __webpack_require__(4);\r\n\tvar ray_1 = __webpack_require__(5);\r\n\tvar map_1 = __webpack_require__(7);\r\n\tvar player_1 = __webpack_require__(8);\r\n\tvar canvaselement = document.getElementById('gamecanvas');\r\n\tvar fps = document.getElementById('fps');\r\n\tvar ctx = canvaselement.getContext('2d');\r\n\tvar WIDTH = 800;\r\n\tvar HEIGHT = 600;\r\n\tvar HEIGHT2 = Math.floor(HEIGHT / 2);\r\n\tvar WALLHEIGHT = HEIGHT * 0.8;\r\n\tvar FOV = 70;\r\n\tvar map = new map_1.Map(100);\r\n\tvar player = new player_1.Player({ x: map.size / 2, y: map.size / 2 }, new angle_1.Angle(0), FOV * Math.PI / 180);\r\n\tvar controls = new controls_1.Controls();\r\n\tfunction initctx(canvas) {\r\n\t    canvas.width = WIDTH;\r\n\t    canvas.height = HEIGHT;\r\n\t    document.addEventListener('keydown', function (e) { return controls.keydown(e); }, false);\r\n\t    document.addEventListener('keyup', function (e) { return controls.keyup(e); }, false);\r\n\t    // canvas.addEventListener('click', (e) => {\r\n\t    //     canvas.requestPointerLock = canvas.requestPointerLock\r\n\t    //     canvas.requestPointerLock()\r\n\t    // }, false)\r\n\t    // document.addEventListener('pointerlockchange', lockChangeAlert, false);\r\n\t}\r\n\t// function lockChangeAlert() {\r\n\t//     if (document.pointerLockElement === canvaselement) {\r\n\t//         document.addEventListener(\"mousemove\", (e) => controls.mousemove(e), false);\r\n\t//     } else {\r\n\t//        document.removeEventListener(\"mousemove\", null, false);\r\n\t//     }\r\n\t// }\r\n\tvar lastRender = Date.now();\r\n\tfunction render() {\r\n\t    var now = Date.now();\r\n\t    var delta = now - lastRender;\r\n\t    lastRender = now;\r\n\t    fps.innerText = (Math.floor(1000 / delta)).toString();\r\n\t    ctx.fillStyle = '#ffffff';\r\n\t    ctx.fillRect(0, 0, WIDTH, HEIGHT);\r\n\t    ctx.fillStyle = '#000000';\r\n\t    ctx.fillRect(0, HEIGHT2, WIDTH, HEIGHT2);\r\n\t    player.getcontrols(controls, map, delta);\r\n\t    var rays = player.getrays(WIDTH);\r\n\t    for (var r = 0; r < rays.length; r++) {\r\n\t        var colisions = ray_1.Ray.cast(map, player.position, null, null, rays[r], 20);\r\n\t        for (var c = 0; c < colisions.length; c++) {\r\n\t            if (colisions[c].type > 0) {\r\n\t                var distance = distancecalc_1.DistanceCalc.getdistance(player.position, colisions[c].point);\r\n\t                var distancecorrected = distance * Math.cos(player.facing.angle - rays[r].angle);\r\n\t                var height = Math.ceil(WALLHEIGHT / distancecorrected);\r\n\t                var color = Math.floor(255 - distancecorrected * 10);\r\n\t                var colorhex = color.toString(16).toLowerCase();\r\n\t                var top_1 = Math.floor(HEIGHT2 - height / 2);\r\n\t                ctx.beginPath();\r\n\t                ctx.moveTo(r, top_1);\r\n\t                ctx.lineTo(r, HEIGHT - top_1);\r\n\t                ctx.lineWidth = 2;\r\n\t                ctx.strokeStyle = \"#\" + colorhex + colorhex + colorhex;\r\n\t                ctx.stroke();\r\n\t                break;\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t    requestAnimationFrame(render);\r\n\t}\r\n\tmap.randomize(0.3);\r\n\tinitctx(canvaselement);\r\n\trender();\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Controls = (function () {\r\n\t    function Controls() {\r\n\t        this.rotateleft = false;\r\n\t        this.rotateright = false;\r\n\t        this.forward = false;\r\n\t        this.backward = false;\r\n\t        this.run = false;\r\n\t        this.strafeleft = false;\r\n\t        this.straferight = false;\r\n\t    }\r\n\t    Controls.prototype.mousemove = function (e) {\r\n\t        this.rotateleft = false;\r\n\t        this.rotateright = false;\r\n\t        if (e.movementX < 0) {\r\n\t            this.rotateleft = true;\r\n\t            this.rotateright = false;\r\n\t        }\r\n\t        else if (e.movementX > 0) {\r\n\t            this.rotateleft = false;\r\n\t            this.rotateright = true;\r\n\t        }\r\n\t        console.log(e.movementX);\r\n\t    };\r\n\t    Controls.prototype.keydown = function (e) {\r\n\t        if (e.keyCode == 37)\r\n\t            this.rotateleft = true;\r\n\t        if (e.keyCode == 68)\r\n\t            this.strafeleft = true;\r\n\t        if (e.keyCode == 39)\r\n\t            this.rotateright = true;\r\n\t        if (e.keyCode == 65)\r\n\t            this.straferight = true;\r\n\t        if (e.keyCode == 38 || e.keyCode == 87)\r\n\t            this.forward = true;\r\n\t        if (e.keyCode == 40 || e.keyCode == 83)\r\n\t            this.backward = true;\r\n\t        this.run = e.shiftKey;\r\n\t    };\r\n\t    Controls.prototype.keyup = function (e) {\r\n\t        if (e.keyCode == 37)\r\n\t            this.rotateleft = false;\r\n\t        if (e.keyCode == 68)\r\n\t            this.strafeleft = false;\r\n\t        if (e.keyCode == 39)\r\n\t            this.rotateright = false;\r\n\t        if (e.keyCode == 65)\r\n\t            this.straferight = false;\r\n\t        if (e.keyCode == 38 || e.keyCode == 87)\r\n\t            this.forward = false;\r\n\t        if (e.keyCode == 40 || e.keyCode == 83)\r\n\t            this.backward = false;\r\n\t        this.run = e.shiftKey;\r\n\t    };\r\n\t    return Controls;\r\n\t}());\r\n\texports.Controls = Controls;\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar DistanceCalc = (function () {\r\n\t    function DistanceCalc() {\r\n\t    }\r\n\t    DistanceCalc.getdistance = function (a, b) {\r\n\t        return Math.sqrt((a.x - b.x) * (a.x - b.x) +\r\n\t            (a.y - b.y) * (a.y - b.y));\r\n\t    };\r\n\t    return DistanceCalc;\r\n\t}());\r\n\texports.DistanceCalc = DistanceCalc;\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Angle = (function () {\r\n\t    function Angle(angle) {\r\n\t        this.angle = angle;\r\n\t        this.sin = Math.sin(angle);\r\n\t        this.cos = Math.cos(angle);\r\n\t        this.tg = this.sin / this.cos;\r\n\t        this.ctg = this.cos / this.sin;\r\n\t        this.dx = this.cos > 0 ? 1 : 0;\r\n\t        this.dy = this.sin > 0 ? 1 : 0;\r\n\t    }\r\n\t    return Angle;\r\n\t}());\r\n\texports.Angle = Angle;\r\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar colision_1 = __webpack_require__(6);\r\n\tvar Ray = (function () {\r\n\t    function Ray() {\r\n\t    }\r\n\t    Ray.nearesty = function (origin, facing) {\r\n\t        var nexty = Math.floor(origin.y) + facing.dy;\r\n\t        if (nexty == origin.y)\r\n\t            nexty -= 1;\r\n\t        var dy = nexty - origin.y;\r\n\t        var dx = facing.ctg * dy;\r\n\t        return {\r\n\t            x: dx + origin.x,\r\n\t            y: nexty,\r\n\t            manhattandistance: Math.abs(dx) + Math.abs(dy)\r\n\t        };\r\n\t    };\r\n\t    Ray.nearestx = function (origin, facing) {\r\n\t        var nextx = Math.floor(origin.x) + facing.dx;\r\n\t        if (nextx == origin.x)\r\n\t            nextx -= 1;\r\n\t        var dx = nextx - origin.x;\r\n\t        var dy = facing.tg * dx;\r\n\t        return {\r\n\t            x: nextx,\r\n\t            y: dy + origin.y,\r\n\t            manhattandistance: Math.abs(dx) + Math.abs(dy)\r\n\t        };\r\n\t    };\r\n\t    Ray.cast = function (map, origin, nexth, nextv, facing, maxdistance) {\r\n\t        if (maxdistance < 1)\r\n\t            return [];\r\n\t        var h = nexth || Ray.nearesty(origin, facing);\r\n\t        var v = nextv || Ray.nearestx(origin, facing);\r\n\t        if (h.manhattandistance < v.manhattandistance) {\r\n\t            v.manhattandistance -= h.manhattandistance;\r\n\t            return [new colision_1.Colision(h, map.getvalue(Math.floor(h.x), h.y - (facing.dy > 0 ? 0 : 1)))]\r\n\t                .concat(Ray.cast(map, h, null, v, facing, maxdistance - h.manhattandistance));\r\n\t        }\r\n\t        else {\r\n\t            h.manhattandistance -= v.manhattandistance;\r\n\t            return [new colision_1.Colision(v, map.getvalue(v.x - (facing.dx > 0 ? 0 : 1), Math.floor(v.y)))]\r\n\t                .concat(Ray.cast(map, v, h, null, facing, maxdistance - v.manhattandistance));\r\n\t        }\r\n\t    };\r\n\t    return Ray;\r\n\t}());\r\n\texports.Ray = Ray;\r\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Colision = (function () {\r\n\t    function Colision(point, type) {\r\n\t        this.point = point;\r\n\t        this.type = type;\r\n\t    }\r\n\t    return Colision;\r\n\t}());\r\n\texports.Colision = Colision;\r\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Map = (function () {\r\n\t    function Map(size) {\r\n\t        this.map = new Uint8Array(size * size);\r\n\t        this.size = size;\r\n\t    }\r\n\t    Map.prototype.setvalue = function (x, y, value) {\r\n\t        var pos = this.size * y + x;\r\n\t        if (pos < this.map.length && pos >= 0) {\r\n\t            this.map[this.size * y + x] = value;\r\n\t        }\r\n\t    };\r\n\t    Map.prototype.getvalue = function (x, y) {\r\n\t        if (x >= 0 && y >= 0 && x < this.size && y < this.size) {\r\n\t            var pos = this.size * y + x;\r\n\t            return this.map[pos];\r\n\t        }\r\n\t        return 0;\r\n\t    };\r\n\t    Map.prototype.randomize = function (factor) {\r\n\t        for (var i = 0; i < this.map.length; i++) {\r\n\t            this.map[i] = Math.random() < factor ? 1 : 0;\r\n\t        }\r\n\t    };\r\n\t    return Map;\r\n\t}());\r\n\texports.Map = Map;\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar mathconst_1 = __webpack_require__(11);\r\n\tvar angle_1 = __webpack_require__(4);\r\n\tvar Player = (function () {\r\n\t    function Player(position, facing, fov) {\r\n\t        this.position = position;\r\n\t        this.facing = facing;\r\n\t        this.fov = fov;\r\n\t    }\r\n\t    Player.prototype.getrays = function (columns) {\r\n\t        var step = this.fov / columns;\r\n\t        var angle = this.facing.angle + this.fov / 2;\r\n\t        var rays = new Array();\r\n\t        for (var i = 0; i < columns; i++) {\r\n\t            rays.push(new angle_1.Angle(angle));\r\n\t            angle -= step;\r\n\t        }\r\n\t        return rays;\r\n\t    };\r\n\t    Player.prototype.rotateleft = function (delta) {\r\n\t        this.facing = new angle_1.Angle(this.facing.angle + Math.PI * delta / 1000);\r\n\t    };\r\n\t    Player.prototype.rotateright = function (delta) {\r\n\t        this.facing = new angle_1.Angle(this.facing.angle - Math.PI * delta / 1000);\r\n\t    };\r\n\t    Player.prototype.moveforward = function (delta, map, run) {\r\n\t        var position = {\r\n\t            x: this.position.x + this.facing.cos * delta / (run ? 250 : 500),\r\n\t            y: this.position.y + this.facing.sin * delta / (run ? 250 : 500)\r\n\t        };\r\n\t        if (map.getvalue(Math.floor(position.x), Math.floor(position.y)) == 0) {\r\n\t            this.position = position;\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.movebackward = function (delta, map) {\r\n\t        var position = {\r\n\t            x: this.position.x - this.facing.cos * delta / 500,\r\n\t            y: this.position.y - this.facing.sin * delta / 500\r\n\t        };\r\n\t        if (map.getvalue(Math.floor(position.x), Math.floor(position.y)) == 0) {\r\n\t            this.position = position;\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.strafeleft = function (delta, map, run) {\r\n\t        var newfacing = new angle_1.Angle(this.facing.angle - mathconst_1.PI0_5);\r\n\t        var position = {\r\n\t            x: this.position.x + newfacing.cos * delta / (run ? 250 : 500),\r\n\t            y: this.position.y + newfacing.sin * delta / (run ? 250 : 500)\r\n\t        };\r\n\t        if (map.getvalue(Math.floor(position.x), Math.floor(position.y)) == 0) {\r\n\t            this.position = position;\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.straferight = function (delta, map, run) {\r\n\t        var newfacing = new angle_1.Angle(this.facing.angle + mathconst_1.PI0_5);\r\n\t        var position = {\r\n\t            x: this.position.x + newfacing.cos * delta / (run ? 250 : 500),\r\n\t            y: this.position.y + newfacing.sin * delta / (run ? 250 : 500)\r\n\t        };\r\n\t        if (map.getvalue(Math.floor(position.x), Math.floor(position.y)) == 0) {\r\n\t            this.position = position;\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.getcontrols = function (controls, map, delta) {\r\n\t        if (controls.forward)\r\n\t            this.moveforward(delta, map, controls.run);\r\n\t        if (controls.backward)\r\n\t            this.movebackward(delta, map);\r\n\t        if (controls.rotateleft)\r\n\t            this.rotateleft(delta);\r\n\t        if (controls.rotateright)\r\n\t            this.rotateright(delta);\r\n\t        if (controls.strafeleft)\r\n\t            this.strafeleft(delta, map, controls.run);\r\n\t        if (controls.straferight)\r\n\t            this.straferight(delta, map, controls.run);\r\n\t    };\r\n\t    return Player;\r\n\t}());\r\n\texports.Player = Player;\r\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 10 */,\n/* 11 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\texports.PI0_5 = Math.PI / 2;\r\n\texports.PI1_0 = Math.PI;\r\n\texports.PI1_5 = 3 * Math.PI / 2;\r\n\texports.PI2_0 = 2 * Math.PI;\r\n\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// app.bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c10fde7d159003b50365","import { Controls } from './controls';\nimport { DistanceCalc } from './distancecalc';\nimport { Angle } from './angle';\nimport { Ray } from './ray';\nimport { PI2_0 } from './mathconst'\nimport { Map } from './map';\nimport { Player } from './player';\n\nconst canvaselement = <HTMLCanvasElement>document.getElementById('gamecanvas')\nconst fps = <HTMLSpanElement>document.getElementById('fps')\nconst ctx = canvaselement.getContext('2d')\nconst WIDTH = 800\nconst HEIGHT = 600\nconst HEIGHT2 = Math.floor(HEIGHT / 2)\nconst WALLHEIGHT = HEIGHT * 0.8\nconst FOV = 70\n\nconst map = new Map(100)\nconst player = new Player(\n    { x: map.size / 2, y: map.size / 2 },\n    new Angle(0),\n    FOV * Math.PI / 180\n)\nconst controls = new Controls()\n\nfunction initctx(canvas: HTMLCanvasElement) {\n    canvas.width = WIDTH\n    canvas.height = HEIGHT\n    document.addEventListener('keydown', (e) => controls.keydown(e), false)\n    document.addEventListener('keyup', (e) => controls.keyup(e), false)\n\n    // canvas.addEventListener('click', (e) => {\n    //     canvas.requestPointerLock = canvas.requestPointerLock\n    //     canvas.requestPointerLock()\n    // }, false)\n\n    // document.addEventListener('pointerlockchange', lockChangeAlert, false);\n}\n\n// function lockChangeAlert() {\n//     if (document.pointerLockElement === canvaselement) {\n//         document.addEventListener(\"mousemove\", (e) => controls.mousemove(e), false);\n//     } else {\n//        document.removeEventListener(\"mousemove\", null, false);\n//     }\n// }\n\nlet lastRender = Date.now();\n\n\nfunction render() {\n    let now = Date.now()\n    let delta = now - lastRender\n    lastRender = now\n    fps.innerText = (Math.floor(1000 / delta)).toString()\n    ctx.fillStyle = '#ffffff'\n    ctx.fillRect(0, 0, WIDTH, HEIGHT)\n    ctx.fillStyle = '#000000'\n    ctx.fillRect(0, HEIGHT2, WIDTH, HEIGHT2)\n\n    player.getcontrols(controls, map, delta)\n\n    var rays = player.getrays(WIDTH)\n    for (let r = 0; r < rays.length; r++) {\n        let colisions = Ray.cast(map, player.position, null, null, rays[r], 20)\n        for (let c = 0; c < colisions.length; c++) {\n            if (colisions[c].type > 0) {\n                let distance = DistanceCalc.getdistance(player.position, colisions[c].point)\n                let distancecorrected = distance * Math.cos(player.facing.angle - rays[r].angle)\n                let height = Math.ceil(WALLHEIGHT / distancecorrected)\n                let color = Math.floor(255 - distancecorrected * 10)\n                let colorhex = color.toString(16).toLowerCase()\n                let top = Math.floor(HEIGHT2 - height / 2)\n                ctx.beginPath()\n                ctx.moveTo(r, top)\n                ctx.lineTo(r, HEIGHT - top)\n                ctx.lineWidth = 2\n                ctx.strokeStyle = `#${colorhex}${colorhex}${colorhex}`\n                ctx.stroke()\n                break\n            }\n        }\n    }\n\n    requestAnimationFrame(render)\n}\n\nmap.randomize(0.3)\ninitctx(canvaselement)\nrender()\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","export class Controls {\r\n    public rotateleft: boolean = false\r\n    public rotateright: boolean = false\r\n    public forward: boolean = false\r\n    public backward: boolean = false\r\n    public run: boolean = false\r\n    public strafeleft: boolean = false\r\n    public straferight: boolean = false\r\n\r\n    public mousemove(e:MouseEvent) {\r\n        this.rotateleft = false\r\n        this.rotateright = false\r\n        if(e.movementX < 0) {\r\n            this.rotateleft = true\r\n            this.rotateright = false\r\n        } else if(e.movementX > 0) {\r\n            this.rotateleft = false\r\n            this.rotateright = true\r\n        }\r\n        console.log(e.movementX)\r\n    }\r\n\r\n    public keydown(e: KeyboardEvent) {\r\n        if (e.keyCode == 37) this.rotateleft = true\r\n        if (e.keyCode == 68) this.strafeleft = true\r\n        if (e.keyCode == 39) this.rotateright = true\r\n        if (e.keyCode == 65) this.straferight = true\r\n        if (e.keyCode == 38 || e.keyCode == 87) this.forward = true\r\n        if (e.keyCode == 40 || e.keyCode == 83) this.backward = true\r\n        this.run = e.shiftKey\r\n    }\r\n\r\n    public keyup(e: KeyboardEvent) {\r\n        if (e.keyCode == 37) this.rotateleft = false\r\n        if (e.keyCode == 68) this.strafeleft = false\r\n        if (e.keyCode == 39) this.rotateright = false\r\n        if (e.keyCode == 65) this.straferight = false\r\n        if (e.keyCode == 38 || e.keyCode == 87) this.forward = false\r\n        if (e.keyCode == 40 || e.keyCode == 83) this.backward = false\r\n        this.run = e.shiftKey\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/controls.ts","import { IPoint } from './ipoint';\r\nexport class DistanceCalc {\r\n    public static getdistance(a: IPoint, b: IPoint) {\r\n        return Math.sqrt(\r\n            (a.x - b.x) * (a.x - b.x) +\r\n            (a.y - b.y) * (a.y - b.y)\r\n        )\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/distancecalc.ts","import { PI2_0 } from './mathconst';\r\n\r\nexport class Angle {\r\n    public angle: number\r\n    public sin: number\r\n    public cos: number\r\n    public tg: number\r\n    public ctg: number\r\n    public dx: number\r\n    public dy: number\r\n\r\n    constructor(angle: number) {\r\n        this.angle = angle\r\n        this.sin = Math.sin(angle)\r\n        this.cos = Math.cos(angle)\r\n        this.tg = this.sin / this.cos\r\n        this.ctg = this.cos / this.sin\r\n        this.dx = this.cos > 0 ? 1 : 0\r\n        this.dy = this.sin > 0 ? 1 : 0\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/angle.ts","import { IManhattanDist } from './imanhattandist';\r\nimport { IPoint } from './ipoint';\r\nimport { Colision } from './colision';\r\nimport { PI0_5, PI1_0, PI1_5 } from './mathconst'\r\nimport { Angle } from './angle';\r\nimport { Map } from './map';\r\n\r\nexport class Ray {\r\n\r\n    public static nearesty(origin: IPoint, facing: Angle): IManhattanDist {\r\n        let nexty = Math.floor(origin.y) + facing.dy\r\n        if (nexty == origin.y) nexty -= 1\r\n        let dy = nexty - origin.y\r\n        let dx = facing.ctg * dy\r\n        return {\r\n            x: dx + origin.x,\r\n            y: nexty,\r\n            manhattandistance: Math.abs(dx) + Math.abs(dy)\r\n        }\r\n    }\r\n\r\n    public static nearestx(origin: IPoint, facing: Angle): IManhattanDist {\r\n        let nextx = Math.floor(origin.x) + facing.dx\r\n        if (nextx == origin.x) nextx -= 1\r\n        let dx = nextx - origin.x\r\n        let dy = facing.tg * dx\r\n        return {\r\n            x: nextx,\r\n            y: dy + origin.y,\r\n            manhattandistance: Math.abs(dx) + Math.abs(dy)\r\n        }\r\n    }\r\n\r\n    public static cast(\r\n        map: Map,\r\n        origin: IPoint,\r\n        nexth: IManhattanDist,\r\n        nextv: IManhattanDist,\r\n        facing: Angle,\r\n        maxdistance: number\r\n    ): Colision[] {\r\n\r\n        if (maxdistance < 1) return []\r\n\r\n        let h = nexth || Ray.nearesty(origin, facing)\r\n        let v = nextv || Ray.nearestx(origin, facing)\r\n\r\n        if (h.manhattandistance < v.manhattandistance) {\r\n            v.manhattandistance -= h.manhattandistance\r\n\r\n            return [new Colision(h, map.getvalue(Math.floor(h.x), h.y - (facing.dy > 0 ? 0 : 1)))]\r\n                .concat(Ray.cast(map, h, null, v, facing, maxdistance - h.manhattandistance))\r\n        } else {\r\n            h.manhattandistance -= v.manhattandistance\r\n            return [new Colision(v, map.getvalue(v.x - (facing.dx > 0 ? 0 : 1), Math.floor(v.y)))]\r\n                .concat(Ray.cast(map, v, h, null, facing, maxdistance - v.manhattandistance))\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ray.ts","import {IPoint} from './ipoint';\r\nexport class Colision {\r\n    constructor(\r\n        public point: IPoint,\r\n        public type: number\r\n    ) {\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/colision.ts","export class Map {\r\n    public map: Uint8Array\r\n    public size: number\r\n\r\n    constructor(size: number) {\r\n        this.map = new Uint8Array(size * size)\r\n        this.size = size\r\n    }\r\n\r\n    public setvalue(x: number, y: number, value: number) {\r\n        let pos = this.size * y + x\r\n        if (pos < this.map.length && pos >= 0) {\r\n            this.map[this.size * y + x] = value\r\n        }\r\n    }\r\n\r\n    public getvalue(x: number, y: number) {\r\n        if (x >= 0 && y >= 0 && x < this.size && y < this.size) {\r\n            let pos = this.size * y + x\r\n            return this.map[pos]\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public randomize(factor:number) {\r\n        for (let i = 0; i < this.map.length; i++) {\r\n            this.map[i] = Math.random() < factor ? 1 : 0\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/map.ts","import { PI0_5 } from './mathconst';\r\nimport { Map } from './map';\r\nimport { Controls } from './controls';\r\nimport { IPoint } from './ipoint';\r\nimport { Angle } from './angle';\r\n\r\nexport class Player {\r\n\r\n    constructor(\r\n        public position: IPoint,\r\n        public facing: Angle,\r\n        public fov: number) {\r\n    }\r\n\r\n    public getrays(columns: number) {\r\n        var step = this.fov / columns\r\n        var angle = this.facing.angle + this.fov / 2\r\n        var rays = new Array<Angle>()\r\n        for (let i = 0; i < columns; i++) {\r\n            rays.push(new Angle(angle))\r\n            angle -= step\r\n        }\r\n        return rays\r\n    }\r\n\r\n    public rotateleft(delta: number) {\r\n        this.facing = new Angle(this.facing.angle + Math.PI * delta / 1000)\r\n    }\r\n\r\n    public rotateright(delta: number) {\r\n        this.facing = new Angle(this.facing.angle - Math.PI * delta / 1000)\r\n    }\r\n\r\n    public moveforward(delta: number, map: Map, run: boolean) {\r\n        let position = {\r\n            x: this.position.x + this.facing.cos * delta / (run ? 250 : 500),\r\n            y: this.position.y + this.facing.sin * delta / (run ? 250 : 500)\r\n        }\r\n        if (map.getvalue(Math.floor(position.x), Math.floor(position.y)) == 0) {\r\n            this.position = position\r\n        }\r\n    }\r\n\r\n    public movebackward(delta: number, map: Map) {\r\n        let position = {\r\n            x: this.position.x - this.facing.cos * delta / 500,\r\n            y: this.position.y - this.facing.sin * delta / 500\r\n        }\r\n        if (map.getvalue(Math.floor(position.x), Math.floor(position.y)) == 0) {\r\n            this.position = position\r\n        }\r\n    }\r\n\r\n    public strafeleft(delta: number, map: Map, run: boolean) {\r\n        let newfacing = new Angle(this.facing.angle - PI0_5)\r\n        let position = {\r\n            x: this.position.x + newfacing.cos * delta / (run ? 250 : 500),\r\n            y: this.position.y + newfacing.sin * delta / (run ? 250 : 500)\r\n        }\r\n        if (map.getvalue(Math.floor(position.x), Math.floor(position.y)) == 0) {\r\n            this.position = position\r\n        }\r\n    }\r\n\r\n    public straferight(delta: number, map: Map, run: boolean) {\r\n        let newfacing = new Angle(this.facing.angle + PI0_5)\r\n        let position = {\r\n            x: this.position.x + newfacing.cos * delta / (run ? 250 : 500),\r\n            y: this.position.y + newfacing.sin * delta / (run ? 250 : 500)\r\n        }\r\n        if (map.getvalue(Math.floor(position.x), Math.floor(position.y)) == 0) {\r\n            this.position = position\r\n        }\r\n    }\r\n\r\n    public getcontrols(controls: Controls, map: Map, delta: number) {\r\n        if (controls.forward) this.moveforward(delta, map, controls.run)\r\n        if (controls.backward) this.movebackward(delta, map)\r\n        if (controls.rotateleft) this.rotateleft(delta)\r\n        if (controls.rotateright) this.rotateright(delta)\r\n        if (controls.strafeleft) this.strafeleft(delta, map, controls.run)\r\n        if (controls.straferight) this.straferight(delta, map, controls.run)\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/player.ts","export const PI0_5: number = Math.PI / 2\r\nexport const PI1_0: number = Math.PI    \r\nexport const PI1_5: number = 3 * Math.PI / 2 \r\nexport const PI2_0: number = 2 * Math.PI\n\n\n// WEBPACK FOOTER //\n// ./src/mathconst.ts"],"sourceRoot":""}