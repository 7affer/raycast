{"version":3,"sources":["webpack:///app.bundle.js","webpack:///webpack/bootstrap 45b7e85e737c89381043","webpack:///./src/scripts/main.ts","webpack:///./src/scripts/assetloader.ts","webpack:///./src/scripts/scene.ts","webpack:///./src/scripts/mathconst.ts","webpack:///./src/scripts/angle.ts","webpack:///./src/scripts/ray.ts","webpack:///./src/scripts/colision.ts","webpack:///./src/scripts/distancecalc.ts","webpack:///./src/scripts/controls.ts","webpack:///./src/scripts/map.ts","webpack:///./src/scripts/sprite.ts","webpack:///./src/scripts/player.ts","webpack:///./src/scripts/sounds/mixer.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","assetloader_1","scene_1","controls_1","angle_1","map_1","player_1","fps","document","getElementById","width","window","innerWidth","gamesettins","height","Math","floor","fov","PI","drawingdistance","floorcolor1","floorcolor2","assetloader","AssetLoader","loadall","prog","innerHTML","ceil","render","now","Date","delta","lastrender","player","getcontrols","controls","map","scene","renderframe","requestAnimationFrame","innerText","toString","style","display","canvas","ctx","getContext","Map","Controls","Player","size","Angle","Scene","bindevents","initonmap","this","mobilecheck","check","a","test","substr","navigator","userAgent","vendor","opera","wallssrcs","spritessrcs","zspritessrcs","skylinesrcs","soundssrcs","sprites","Array","zsprites","walls","skyline","sounds","prototype","toload","length","loadimages","arrsrc","arrobj","onprogress","callback","_this","_loop_1","i","push","Image","onload","console","log","src","loadaudio","_loop_2","Audio","oncanplaythrough","audio","mathconst_1","ray_1","distancecalc_1","settings","assets","height2","wallheight","renderbackground","image","PI4","sleft","PI2_0","facing","angle","abs","swidth","drawImage","fillStyle","fillRect","renderwall","row","distance","textureposition","top","texleft","shadowdistance","beginPath","moveTo","lineTo","lineWidth","strokeStyle","globalAlpha","min","stroke","drawwall","left","wall","modx","x","mody","y","type","drawobject","object","bottom","starttexture","texright","endtexture","max","end","start","drawfloor","useback","newbottom","filterobjectsinrange","objectsinrange","normalizeangle","atan2","getobjectstodraw","ray","walldistance","objecttodraw","_i","sprites_1","DistanceCalc","getdistance","PI1_5","diff","allobjecttodraw","zombiesingange","zombies","rays","getrays","r","drawfloorray","cos","colisions","Ray","cast","colisions_1","colision","zombiestodraw","concat","_a","objectsinrange_1","_b","zombiesingange_1","PI0_5","PI1_0","sin","tg","ctg","dx","dy","colision_1","nearesty","origin","nexty","manhattandistance","nearestx","nextx","nexth","nextv","maxdistance","h","v","getvalue","Colision","b","sqrt","rotateleft","rotateright","forward","backward","run","strafeleft","straferight","mouserotateleft","mouserotateright","shoot","mousemovefunction","e","mousemove","movementX","resetmouserotate","keydown","keyCode","shiftKey","touchstart","t","touches","touchend","pageY","pageX","preventDefault","stopPropagation","keyup","doc","addEventListener","lockChangeAlert","requestPointerLock","mozRequestPointerLock","canvaselement","pointerLockElement","mozPointerLockElement","removeEventListener","sprite_1","randparam","Uint8Array","randomize","Sprite","random","setvalue","value","pos","mixer_1","loader","guncooldown","mixer","Mixer","columns","step","time","getTime","playsound","movement","correctposition","newposition","moveforward","position","movebackward","newfacing","$loader","maxchannels","audiochannels","Sound","audioel","finish","index","duration","play"],"mappings":"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","file":"app.bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(1);\n\tmodule.exports = __webpack_require__(14);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar assetloader_1 = __webpack_require__(2);\r\n\tvar scene_1 = __webpack_require__(3);\r\n\tvar controls_1 = __webpack_require__(9);\r\n\tvar angle_1 = __webpack_require__(5);\r\n\tvar map_1 = __webpack_require__(10);\r\n\tvar player_1 = __webpack_require__(12);\r\n\tvar fps = document.getElementById('fps');\r\n\tvar width = window.innerWidth < 1024 ? window.innerWidth : 1024;\r\n\tvar gamesettins = {\r\n\t    width: width,\r\n\t    height: Math.floor(width / 1.8),\r\n\t    fov: 70 * Math.PI / 180,\r\n\t    drawingdistance: 20,\r\n\t    floorcolor1: '#3D2F2D',\r\n\t    floorcolor2: '#261311'\r\n\t};\r\n\tvar assetloader = new assetloader_1.AssetLoader();\r\n\tassetloader.loadall(function (prog) { return document.getElementById('loading').innerHTML = \"Loading: \" + Math.ceil(prog * 100) + \"%\"; }, function () {\r\n\t    document.getElementById('loading-container').style.display = 'none';\r\n\t    var canvas = document.getElementById('gamecanvas');\r\n\t    var ctx = canvas.getContext('2d');\r\n\t    var map = new map_1.Map(150, 0.3, assetloader);\r\n\t    var controls = new controls_1.Controls();\r\n\t    var player = new player_1.Player(map.size / 2 + 0.25, map.size / 2 + 0.25, new angle_1.Angle(0), assetloader);\r\n\t    var scene = new scene_1.Scene(ctx, gamesettins, assetloader);\r\n\t    canvas.width = gamesettins.width;\r\n\t    canvas.height = gamesettins.height;\r\n\t    canvas.style.width = gamesettins.width + \"px\";\r\n\t    canvas.style.height = gamesettins.height + \"px\";\r\n\t    controls.bindevents(document, canvas);\r\n\t    player.initonmap(map);\r\n\t    var lastrender = Date.now();\r\n\t    function render() {\r\n\t        var now = Date.now();\r\n\t        var delta = now - lastrender;\r\n\t        lastrender = now;\r\n\t        player.getcontrols(controls, map, delta);\r\n\t        scene.renderframe(delta, map, player, gamesettins.fov);\r\n\t        requestAnimationFrame(render);\r\n\t        fps.innerText = (Math.floor(1000 / delta)).toString();\r\n\t    }\r\n\t    render();\r\n\t});\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar AssetLoader = (function () {\r\n\t    function AssetLoader() {\r\n\t        this.loaded = 0;\r\n\t        this.mobilecheck = function () {\r\n\t            var check = false;\r\n\t            (function (a) {\r\n\t                if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4)))\r\n\t                    check = true;\r\n\t            })(navigator.userAgent ||\r\n\t                navigator.vendor ||\r\n\t                window.opera);\r\n\t            return check;\r\n\t        };\r\n\t        this.wallssrcs = [\r\n\t            './assets/walls/wall1.jpg',\r\n\t            './assets/walls/wall2.jpg',\r\n\t            './assets/walls/wall3.jpg',\r\n\t            './assets/walls/wall4.jpg',\r\n\t            './assets/walls/wall5.jpg',\r\n\t            './assets/walls/wall1b.jpg',\r\n\t            './assets/walls/wall2b.jpg',\r\n\t            './assets/walls/wall3b.jpg',\r\n\t            './assets/walls/wall4b.jpg',\r\n\t            './assets/walls/wall5b.jpg',\r\n\t            './assets/walls/wall1c.jpg',\r\n\t            './assets/walls/wall2c.jpg',\r\n\t            './assets/walls/wall3c.jpg',\r\n\t            './assets/walls/wall4c.jpg',\r\n\t            './assets/walls/wall5c.jpg'\r\n\t        ];\r\n\t        this.spritessrcs = [\r\n\t            './assets/sprites/sprite1.png',\r\n\t            './assets/sprites/sprite2.png',\r\n\t            './assets/sprites/sprite3.png',\r\n\t            './assets/sprites/sprite4.png',\r\n\t            './assets/sprites/sprite5.png'\r\n\t        ];\r\n\t        this.zspritessrcs = [\r\n\t            './assets/sprites/zombie1.png',\r\n\t            './assets/sprites/zombie2.png',\r\n\t            './assets/sprites/zombie3.png',\r\n\t            './assets/sprites/zombie4.png'\r\n\t        ];\r\n\t        this.skylinesrcs = [\r\n\t            './assets/sprites/skyline.jpg'\r\n\t        ];\r\n\t        this.soundssrcs = [\r\n\t            './assets/sounds/gun.mp3'\r\n\t        ];\r\n\t        this.sprites = new Array();\r\n\t        this.zsprites = new Array();\r\n\t        this.walls = new Array();\r\n\t        this.skyline = new Array();\r\n\t        this.sounds = new Array();\r\n\t    }\r\n\t    AssetLoader.prototype.toload = function () {\r\n\t        return this.walls.length +\r\n\t            this.sprites.length +\r\n\t            this.zsprites.length +\r\n\t            this.skyline.length +\r\n\t            (this.mobilecheck() ? 0 : this.sounds.length);\r\n\t    };\r\n\t    AssetLoader.prototype.loadimages = function (arrsrc, arrobj, onprogress, callback) {\r\n\t        var _this = this;\r\n\t        var _loop_1 = function(i) {\r\n\t            arrobj.push(new Image());\r\n\t            arrobj[i].onload = function () {\r\n\t                onprogress(++_this.loaded / _this.toload());\r\n\t                if (_this.loaded >= _this.toload())\r\n\t                    callback();\r\n\t                console.log('loaded ' + arrobj[i]);\r\n\t            };\r\n\t            arrobj[i].src = arrsrc[i];\r\n\t        };\r\n\t        for (var i in arrsrc) {\r\n\t            _loop_1(i);\r\n\t        }\r\n\t    };\r\n\t    AssetLoader.prototype.loadaudio = function (arrsrc, arrobj, onprogress, callback) {\r\n\t        var _this = this;\r\n\t        var _loop_2 = function(i) {\r\n\t            arrobj.push(new Audio());\r\n\t            arrobj[i].oncanplaythrough = function () {\r\n\t                onprogress(++_this.loaded / _this.toload());\r\n\t                if (_this.loaded >= _this.toload())\r\n\t                    callback();\r\n\t                console.log('loaded ' + arrobj[i]);\r\n\t            };\r\n\t            arrobj[i].src = arrsrc[i];\r\n\t        };\r\n\t        for (var i in arrsrc) {\r\n\t            _loop_2(i);\r\n\t        }\r\n\t    };\r\n\t    AssetLoader.prototype.loadall = function (onprogress, callback) {\r\n\t        this.loadimages(this.wallssrcs, this.walls, onprogress, callback);\r\n\t        this.loadimages(this.spritessrcs, this.sprites, onprogress, callback);\r\n\t        this.loadimages(this.zspritessrcs, this.zsprites, onprogress, callback);\r\n\t        this.loadimages(this.skylinesrcs, this.skyline, onprogress, callback);\r\n\t        this.loadaudio(this.soundssrcs, this.sounds, onprogress, callback);\r\n\t        var audio = new Audio();\r\n\t        audio.onload = function () { };\r\n\t    };\r\n\t    return AssetLoader;\r\n\t}());\r\n\texports.AssetLoader = AssetLoader;\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar mathconst_1 = __webpack_require__(4);\r\n\tvar angle_1 = __webpack_require__(5);\r\n\tvar ray_1 = __webpack_require__(6);\r\n\tvar distancecalc_1 = __webpack_require__(8);\r\n\tvar Scene = (function () {\r\n\t    function Scene(ctx, settings, assets) {\r\n\t        this.ctx = ctx;\r\n\t        this.settings = settings;\r\n\t        this.assets = assets;\r\n\t        this.lastrender = Date.now();\r\n\t        this.height2 = Math.floor(settings.height / 2);\r\n\t        this.wallheight = Math.floor(settings.height * 0.8);\r\n\t    }\r\n\t    Scene.prototype.renderbackground = function (player, fov) {\r\n\t        var image = this.assets.skyline[0];\r\n\t        var PI4 = 4 * Math.PI;\r\n\t        var sleft = ((mathconst_1.PI2_0 - (player.facing.angle + fov / 2)) / PI4) * image.width;\r\n\t        sleft = Math.abs(sleft);\r\n\t        sleft = Math.floor(sleft);\r\n\t        var swidth = Math.floor((image.width * fov) / PI4);\r\n\t        var height = Math.floor(this.settings.height * 0.5);\r\n\t        this.ctx.drawImage(image, sleft, 0, swidth, image.height, 0, 0, this.settings.width, height);\r\n\t        this.ctx.fillStyle = this.settings.floorcolor1;\r\n\t        this.ctx.fillRect(0, this.height2, this.settings.width, this.settings.height);\r\n\t    };\r\n\t    Scene.prototype.renderwall = function (row, distance, image, textureposition) {\r\n\t        var height = Math.ceil(this.wallheight / distance);\r\n\t        var top = Math.floor(this.height2 - height / 2);\r\n\t        var texleft = Math.floor(textureposition * image.width);\r\n\t        var shadowdistance = this.settings.drawingdistance * 0.7;\r\n\t        this.ctx.drawImage(image, texleft, 0, 1, image.height, row, top, 1, height);\r\n\t        if (row % 3 == 0) {\r\n\t            this.ctx.beginPath();\r\n\t            this.ctx.moveTo(row, top);\r\n\t            this.ctx.lineTo(row, this.settings.height - top);\r\n\t            this.ctx.lineWidth = 4;\r\n\t            this.ctx.strokeStyle = '#000000';\r\n\t            this.ctx.fillStyle = '#000000';\r\n\t            this.ctx.globalAlpha = Math.min(distance, shadowdistance) / shadowdistance;\r\n\t            this.ctx.stroke();\r\n\t            this.ctx.globalAlpha = 1;\r\n\t        }\r\n\t    };\r\n\t    Scene.prototype.drawwall = function (left, distance, wall, player) {\r\n\t        var modx = wall.x - Math.floor(wall.x);\r\n\t        var mody = wall.y - Math.floor(wall.y);\r\n\t        var textureposition = Math.abs(modx > mody ? modx : mody);\r\n\t        if (distance < 3) {\r\n\t            this.renderwall(left, distance, this.assets.walls[wall.type - 1], textureposition);\r\n\t        }\r\n\t        else if (distance < 8) {\r\n\t            this.renderwall(left, distance, this.assets.walls[wall.type - 1 + 5], textureposition);\r\n\t        }\r\n\t        else {\r\n\t            this.renderwall(left, distance, this.assets.walls[wall.type - 1 + 10], textureposition);\r\n\t        }\r\n\t    };\r\n\t    Scene.prototype.drawobject = function (object) {\r\n\t        var wallheight = Math.ceil(this.wallheight / object.distance);\r\n\t        var bottom = Math.floor(this.height2 + wallheight / 2);\r\n\t        var texleft = Math.floor(object.starttexture * object.image.width);\r\n\t        var texright = Math.floor(object.endtexture * object.image.width);\r\n\t        var height = Math.floor(wallheight * 0.4);\r\n\t        var swidth = Math.max(1, texright - texleft);\r\n\t        var top = bottom - height;\r\n\t        var width = Math.max(1, object.end - object.start);\r\n\t        this.ctx.drawImage(object.image, texleft, 0, swidth, object.image.height, object.start, top, width, height);\r\n\t    };\r\n\t    Scene.prototype.drawfloor = function (left, distance, bottom, useback) {\r\n\t        var height = Math.ceil(this.wallheight / distance);\r\n\t        var newbottom = Math.floor(this.settings.height - (this.height2 - height / 2));\r\n\t        if (useback && left % 3 == 0) {\r\n\t            this.ctx.beginPath();\r\n\t            this.ctx.moveTo(left, bottom);\r\n\t            this.ctx.lineTo(left, newbottom);\r\n\t            this.ctx.lineWidth = 3;\r\n\t            this.ctx.strokeStyle = this.settings.floorcolor2;\r\n\t            this.ctx.stroke();\r\n\t        }\r\n\t        return newbottom;\r\n\t    };\r\n\t    Scene.prototype.filterobjectsinrange = function (player, sprites) {\r\n\t        var objectsinrange = new Array();\r\n\t        for (var i = 0; i < sprites.length; i++) {\r\n\t            if (Math.abs(player.x - sprites[i].x) < this.settings.drawingdistance &&\r\n\t                Math.abs(player.y - sprites[i].y) < this.settings.drawingdistance) {\r\n\t                sprites[i].angle = angle_1.Angle.normalizeangle(Math.atan2(sprites[i].y - player.y, sprites[i].x - player.x));\r\n\t                objectsinrange.push(sprites[i]);\r\n\t            }\r\n\t        }\r\n\t        return objectsinrange;\r\n\t    };\r\n\t    Scene.prototype.getobjectstodraw = function (player, sprites, ray, row, walldistance) {\r\n\t        var objecttodraw = new Array();\r\n\t        for (var _i = 0, sprites_1 = sprites; _i < sprites_1.length; _i++) {\r\n\t            var object = sprites_1[_i];\r\n\t            object.distance = distancecalc_1.DistanceCalc.getdistance(player, object);\r\n\t            if (object.distance < this.settings.drawingdistance && object.distance < walldistance) {\r\n\t                if (object.distance < 0.25)\r\n\t                    object.distance = 0.25;\r\n\t                if (ray.angle > mathconst_1.PI1_5)\r\n\t                    ray.angle -= mathconst_1.PI2_0;\r\n\t                if (object.angle > mathconst_1.PI1_5)\r\n\t                    object.angle -= mathconst_1.PI2_0;\r\n\t                var diff = (ray.angle - object.angle) / (2 * Math.atan2(0.05, object.distance));\r\n\t                if (Math.abs(diff) <= 1) {\r\n\t                    diff = Math.abs((diff - 1) * 0.5);\r\n\t                    if (object.start < 0) {\r\n\t                        object.start = row;\r\n\t                        object.starttexture = diff;\r\n\t                    }\r\n\t                    object.end = row;\r\n\t                    object.endtexture = diff;\r\n\t                    objecttodraw.push(object);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        return objecttodraw;\r\n\t    };\r\n\t    Scene.prototype.renderframe = function (delta, map, player, fov) {\r\n\t        this.renderbackground(player, fov);\r\n\t        var allobjecttodraw = new Array();\r\n\t        var objectsinrange = this.filterobjectsinrange(player, map.sprites);\r\n\t        var zombiesingange = this.filterobjectsinrange(player, map.zombies);\r\n\t        var rays = player.getrays(this.settings.width, this.settings.fov);\r\n\t        var drawfloor = (Math.floor(player.x) + Math.floor(player.y)) % 2 == 0;\r\n\t        for (var r = 0; r < rays.length; r++) {\r\n\t            var bottom = this.settings.height;\r\n\t            var drawfloorray = drawfloor;\r\n\t            var walldistance = void 0;\r\n\t            var cos = Math.cos(player.facing.angle - rays[r].angle);\r\n\t            var colisions = ray_1.Ray.cast(map, player, null, null, rays[r], this.settings.drawingdistance);\r\n\t            for (var _i = 0, colisions_1 = colisions; _i < colisions_1.length; _i++) {\r\n\t                var colision = colisions_1[_i];\r\n\t                var distance = distancecalc_1.DistanceCalc.getdistance(player, colision) * cos;\r\n\t                if (colision.type > 0) {\r\n\t                    walldistance = distance;\r\n\t                    this.drawwall(r, distance, colision, player);\r\n\t                }\r\n\t                bottom = this.drawfloor(r, distance, bottom, drawfloorray);\r\n\t                drawfloorray = !drawfloorray;\r\n\t            }\r\n\t            var objecttodraw = this.getobjectstodraw(player, objectsinrange, rays[r], r, walldistance);\r\n\t            var zombiestodraw = this.getobjectstodraw(player, zombiesingange, rays[r], r, walldistance);\r\n\t            allobjecttodraw = objecttodraw.concat(zombiestodraw);\r\n\t        }\r\n\t        for (var _a = 0, objectsinrange_1 = objectsinrange; _a < objectsinrange_1.length; _a++) {\r\n\t            var object = objectsinrange_1[_a];\r\n\t            if (object.start >= 0)\r\n\t                this.drawobject(object);\r\n\t            object.start = -1;\r\n\t        }\r\n\t        for (var _b = 0, zombiesingange_1 = zombiesingange; _b < zombiesingange_1.length; _b++) {\r\n\t            var object = zombiesingange_1[_b];\r\n\t            if (object.start >= 0)\r\n\t                this.drawobject(object);\r\n\t            object.start = -1;\r\n\t        }\r\n\t    };\r\n\t    return Scene;\r\n\t}());\r\n\texports.Scene = Scene;\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\texports.PI0_5 = Math.PI / 2;\r\n\texports.PI1_0 = Math.PI;\r\n\texports.PI1_5 = 3 * Math.PI / 2;\r\n\texports.PI2_0 = 2 * Math.PI;\r\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar mathconst_1 = __webpack_require__(4);\r\n\tvar Angle = (function () {\r\n\t    function Angle(angle) {\r\n\t        this.angle = Angle.normalizeangle(angle);\r\n\t        this.sin = Math.sin(angle);\r\n\t        this.cos = Math.cos(angle);\r\n\t        this.tg = this.sin / this.cos;\r\n\t        this.ctg = this.cos / this.sin;\r\n\t        this.dx = this.cos > 0 ? 1 : 0;\r\n\t        this.dy = this.sin > 0 ? 1 : 0;\r\n\t    }\r\n\t    Angle.normalizeangle = function (angle) {\r\n\t        if (angle < 0)\r\n\t            angle += mathconst_1.PI2_0;\r\n\t        if (angle > mathconst_1.PI2_0)\r\n\t            angle -= mathconst_1.PI2_0;\r\n\t        return angle;\r\n\t    };\r\n\t    return Angle;\r\n\t}());\r\n\texports.Angle = Angle;\r\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar colision_1 = __webpack_require__(7);\r\n\tvar Ray = (function () {\r\n\t    function Ray() {\r\n\t    }\r\n\t    Ray.nearesty = function (origin, facing) {\r\n\t        var nexty = Math.floor(origin.y + facing.dy);\r\n\t        if (nexty == origin.y)\r\n\t            nexty -= 1;\r\n\t        var dy = nexty - origin.y;\r\n\t        var dx = facing.ctg * dy;\r\n\t        return {\r\n\t            x: dx + origin.x,\r\n\t            y: nexty,\r\n\t            manhattandistance: Math.abs(dx) + Math.abs(dy)\r\n\t        };\r\n\t    };\r\n\t    Ray.nearestx = function (origin, facing) {\r\n\t        var nextx = Math.floor(origin.x + facing.dx);\r\n\t        if (nextx == origin.x)\r\n\t            nextx -= 1;\r\n\t        var dx = nextx - origin.x;\r\n\t        var dy = facing.tg * dx;\r\n\t        return {\r\n\t            x: nextx,\r\n\t            y: dy + origin.y,\r\n\t            manhattandistance: Math.abs(dx) + Math.abs(dy)\r\n\t        };\r\n\t    };\r\n\t    Ray.cast = function (map, origin, nexth, nextv, facing, maxdistance) {\r\n\t        if (maxdistance < 1)\r\n\t            return [];\r\n\t        var h = nexth || Ray.nearesty(origin, facing);\r\n\t        var v = nextv || Ray.nearestx(origin, facing);\r\n\t        if (h.manhattandistance < v.manhattandistance) {\r\n\t            v.manhattandistance -= h.manhattandistance;\r\n\t            var type = map.getvalue(Math.floor(h.x), h.y - (facing.dy > 0 ? 0 : 1));\r\n\t            if (type > 0) {\r\n\t                return [new colision_1.Colision(h.x, h.y, type)];\r\n\t            }\r\n\t            else {\r\n\t                return [new colision_1.Colision(h.x, h.y, type)]\r\n\t                    .concat(Ray.cast(map, h, null, v, facing, maxdistance - h.manhattandistance));\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            h.manhattandistance -= v.manhattandistance;\r\n\t            var type = map.getvalue(v.x - (facing.dx > 0 ? 0 : 1), Math.floor(v.y));\r\n\t            if (type > 0) {\r\n\t                return [new colision_1.Colision(v.x, v.y, type)];\r\n\t            }\r\n\t            else {\r\n\t                return [new colision_1.Colision(v.x, v.y, type)]\r\n\t                    .concat(Ray.cast(map, v, h, null, facing, maxdistance - v.manhattandistance));\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return Ray;\r\n\t}());\r\n\texports.Ray = Ray;\r\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Colision = (function () {\r\n\t    function Colision(x, y, type) {\r\n\t        this.x = x;\r\n\t        this.y = y;\r\n\t        this.type = type;\r\n\t    }\r\n\t    return Colision;\r\n\t}());\r\n\texports.Colision = Colision;\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar DistanceCalc = (function () {\r\n\t    function DistanceCalc() {\r\n\t    }\r\n\t    DistanceCalc.getdistance = function (a, b) {\r\n\t        return Math.sqrt((a.x - b.x) * (a.x - b.x) +\r\n\t            (a.y - b.y) * (a.y - b.y));\r\n\t    };\r\n\t    return DistanceCalc;\r\n\t}());\r\n\texports.DistanceCalc = DistanceCalc;\r\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Controls = (function () {\r\n\t    function Controls() {\r\n\t        var _this = this;\r\n\t        this.rotateleft = false;\r\n\t        this.rotateright = false;\r\n\t        this.forward = false;\r\n\t        this.backward = false;\r\n\t        this.run = false;\r\n\t        this.strafeleft = false;\r\n\t        this.straferight = false;\r\n\t        this.mouserotateleft = 0;\r\n\t        this.mouserotateright = 0;\r\n\t        this.shoot = false;\r\n\t        this.mousemovefunction = function (e) { return _this.mousemove(e); };\r\n\t    }\r\n\t    Controls.prototype.mousemove = function (e) {\r\n\t        if (e.movementX < 0) {\r\n\t            this.mouserotateleft = -e.movementX / 5;\r\n\t            this.mouserotateright = 0;\r\n\t        }\r\n\t        else if (e.movementX > 0) {\r\n\t            this.mouserotateleft = 0;\r\n\t            this.mouserotateright = e.movementX / 5;\r\n\t        }\r\n\t    };\r\n\t    Controls.prototype.resetmouserotate = function () {\r\n\t        this.mouserotateleft = 0;\r\n\t        this.mouserotateright = 0;\r\n\t    };\r\n\t    Controls.prototype.keydown = function (e) {\r\n\t        if (e.keyCode == 17)\r\n\t            this.shoot = true;\r\n\t        if (e.keyCode == 37)\r\n\t            this.rotateleft = true;\r\n\t        if (e.keyCode == 68)\r\n\t            this.strafeleft = true;\r\n\t        if (e.keyCode == 39)\r\n\t            this.rotateright = true;\r\n\t        if (e.keyCode == 65)\r\n\t            this.straferight = true;\r\n\t        if (e.keyCode == 38 || e.keyCode == 87)\r\n\t            this.forward = true;\r\n\t        if (e.keyCode == 40 || e.keyCode == 83)\r\n\t            this.backward = true;\r\n\t        this.run = e.shiftKey;\r\n\t    };\r\n\t    Controls.prototype.touchstart = function (e, canvas) {\r\n\t        var t = e.touches[0];\r\n\t        this.touchend(e);\r\n\t        if (t.pageY < canvas.height * 0.5) {\r\n\t            this.shoot = true;\r\n\t        }\r\n\t        else {\r\n\t            if (t.pageX < window.innerWidth * 0.333)\r\n\t                this.rotateleft = true;\r\n\t            else if (t.pageX < window.innerWidth * 0.666)\r\n\t                this.forward = true;\r\n\t            else\r\n\t                this.rotateright = true;\r\n\t        }\r\n\t        e.preventDefault();\r\n\t        e.stopPropagation();\r\n\t    };\r\n\t    Controls.prototype.touchend = function (e) {\r\n\t        this.rotateleft = false;\r\n\t        this.rotateright = false;\r\n\t        this.forward = false;\r\n\t        e.preventDefault();\r\n\t        e.stopPropagation();\r\n\t    };\r\n\t    Controls.prototype.keyup = function (e) {\r\n\t        if (e.keyCode == 37)\r\n\t            this.rotateleft = false;\r\n\t        if (e.keyCode == 68)\r\n\t            this.strafeleft = false;\r\n\t        if (e.keyCode == 39)\r\n\t            this.rotateright = false;\r\n\t        if (e.keyCode == 65)\r\n\t            this.straferight = false;\r\n\t        if (e.keyCode == 38 || e.keyCode == 87)\r\n\t            this.forward = false;\r\n\t        if (e.keyCode == 40 || e.keyCode == 83)\r\n\t            this.backward = false;\r\n\t        this.run = e.shiftKey;\r\n\t    };\r\n\t    Controls.prototype.bindevents = function (doc, canvas) {\r\n\t        var _this = this;\r\n\t        doc.addEventListener('keydown', function (e) { return _this.keydown(e); }, false);\r\n\t        doc.addEventListener('keyup', function (e) { return _this.keyup(e); }, false);\r\n\t        doc.addEventListener('pointerlockchange', function (e) { _this.lockChangeAlert(doc, canvas); }, false);\r\n\t        doc.addEventListener('mozpointerlockchange', function (e) { _this.lockChangeAlert(doc, canvas); }, false);\r\n\t        canvas.addEventListener('touchstart', function (e) { _this.touchstart(e, canvas); }, false);\r\n\t        canvas.addEventListener('touchend', function (e) { _this.touchend(e); }, false);\r\n\t        canvas.addEventListener('click', function (e) {\r\n\t            canvas.requestPointerLock = canvas.requestPointerLock || canvas.mozRequestPointerLock;\r\n\t            canvas.requestPointerLock();\r\n\t            _this.shoot = true;\r\n\t        }, false);\r\n\t    };\r\n\t    Controls.prototype.lockChangeAlert = function (doc, canvas) {\r\n\t        var canvaselement = document.getElementById('gamecanvas');\r\n\t        if (doc.pointerLockElement === canvaselement || document.mozPointerLockElement === canvas) {\r\n\t            doc.addEventListener(\"mousemove\", this.mousemovefunction, false);\r\n\t        }\r\n\t        else {\r\n\t            doc.removeEventListener(\"mousemove\", this.mousemovefunction, false);\r\n\t        }\r\n\t    };\r\n\t    return Controls;\r\n\t}());\r\n\texports.Controls = Controls;\r\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar sprite_1 = __webpack_require__(11);\r\n\tvar Map = (function () {\r\n\t    function Map(size, randparam, assetloader) {\r\n\t        this.map = new Uint8Array(size * size);\r\n\t        this.size = size;\r\n\t        this.randomize(randparam);\r\n\t        this.sprites = new Array();\r\n\t        for (var i = 0; i < size * 25; i++) {\r\n\t            this.sprites.push(new sprite_1.Sprite(Math.random() * size, Math.random() * size, assetloader.sprites[Math.floor(Math.random() * assetloader.sprites.length)]));\r\n\t        }\r\n\t        this.zombies = new Array();\r\n\t        for (var i = 0; i < size * 25; i++) {\r\n\t            this.zombies.push(new sprite_1.Sprite(Math.random() * size, Math.random() * size, assetloader.zsprites[Math.floor(Math.random() * assetloader.zsprites.length)]));\r\n\t        }\r\n\t    }\r\n\t    Map.prototype.setvalue = function (x, y, value) {\r\n\t        var pos = this.size * y + x;\r\n\t        if (pos < this.map.length && pos >= 0) {\r\n\t            this.map[this.size * y + x] = value;\r\n\t        }\r\n\t    };\r\n\t    Map.prototype.getvalue = function (x, y) {\r\n\t        if (x >= 0 && y >= 0 && x < this.size && y < this.size) {\r\n\t            var pos = this.size * y + x;\r\n\t            return this.map[pos];\r\n\t        }\r\n\t        return 0;\r\n\t    };\r\n\t    Map.prototype.randomize = function (randparam) {\r\n\t        for (var i = 0; i < this.map.length; i++) {\r\n\t            if (Math.random() < randparam) {\r\n\t                if (Math.random() < 0.1) {\r\n\t                    this.map[i] = 5;\r\n\t                }\r\n\t                else if (Math.random() < 0.1) {\r\n\t                    this.map[i] = 4;\r\n\t                }\r\n\t                else if (Math.random() < 0.3) {\r\n\t                    this.map[i] = 3;\r\n\t                }\r\n\t                else if (Math.random() < 0.5) {\r\n\t                    this.map[i] = 2;\r\n\t                }\r\n\t                else {\r\n\t                    this.map[i] = 1;\r\n\t                }\r\n\t            }\r\n\t            else {\r\n\t                this.map[i] = 0;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return Map;\r\n\t}());\r\n\texports.Map = Map;\r\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Sprite = (function () {\r\n\t    function Sprite(x, y, image) {\r\n\t        this.x = x;\r\n\t        this.y = y;\r\n\t        this.image = image;\r\n\t        this.start = -1;\r\n\t    }\r\n\t    return Sprite;\r\n\t}());\r\n\texports.Sprite = Sprite;\r\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar mixer_1 = __webpack_require__(13);\r\n\tvar mathconst_1 = __webpack_require__(4);\r\n\tvar angle_1 = __webpack_require__(5);\r\n\tvar Player = (function () {\r\n\t    function Player(x, y, facing, loader) {\r\n\t        this.x = x;\r\n\t        this.y = y;\r\n\t        this.facing = facing;\r\n\t        this.loader = loader;\r\n\t        this.guncooldown = 0;\r\n\t        if (loader != null)\r\n\t            this.mixer = new mixer_1.Mixer(loader);\r\n\t    }\r\n\t    Player.prototype.getrays = function (columns, fov) {\r\n\t        var step = fov / columns;\r\n\t        var angle = this.facing.angle + fov / 2;\r\n\t        var rays = new Array();\r\n\t        for (var i = 0; i < columns; i++) {\r\n\t            rays.push(new angle_1.Angle(angle));\r\n\t            angle -= step;\r\n\t        }\r\n\t        return rays;\r\n\t    };\r\n\t    Player.prototype.shoot = function () {\r\n\t        var time = (new Date()).getTime();\r\n\t        if (this.guncooldown < time) {\r\n\t            this.mixer.playsound(0);\r\n\t            this.guncooldown = time + 750;\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.rotateleft = function (delta, movement) {\r\n\t        this.facing = new angle_1.Angle(this.facing.angle + Math.PI * movement * delta / 1200);\r\n\t    };\r\n\t    Player.prototype.rotateright = function (delta, movement) {\r\n\t        this.facing = new angle_1.Angle(this.facing.angle - Math.PI * movement * delta / 1200);\r\n\t    };\r\n\t    Player.prototype.correctposition = function (map, newposition) {\r\n\t        if (map.getvalue(Math.floor(newposition.x), Math.floor(this.y)) > 0) {\r\n\t            newposition.x = this.x;\r\n\t        }\r\n\t        if (map.getvalue(Math.floor(this.x), Math.floor(newposition.y)) > 0) {\r\n\t            newposition.y = this.y;\r\n\t        }\r\n\t        this.x = newposition.x;\r\n\t        this.y = newposition.y;\r\n\t    };\r\n\t    Player.prototype.moveforward = function (delta, map, run) {\r\n\t        var position = {\r\n\t            x: this.x + this.facing.cos * delta / (run ? 250 : 500),\r\n\t            y: this.y + this.facing.sin * delta / (run ? 250 : 500)\r\n\t        };\r\n\t        this.correctposition(map, position);\r\n\t    };\r\n\t    Player.prototype.movebackward = function (delta, map) {\r\n\t        this.correctposition(map, {\r\n\t            x: this.x - this.facing.cos * delta / 500,\r\n\t            y: this.y - this.facing.sin * delta / 500\r\n\t        });\r\n\t    };\r\n\t    Player.prototype.strafeleft = function (delta, map, run) {\r\n\t        var newfacing = new angle_1.Angle(this.facing.angle - mathconst_1.PI0_5);\r\n\t        this.correctposition(map, {\r\n\t            x: this.x + newfacing.cos * delta / (run ? 250 : 500),\r\n\t            y: this.y + newfacing.sin * delta / (run ? 250 : 500)\r\n\t        });\r\n\t    };\r\n\t    Player.prototype.straferight = function (delta, map, run) {\r\n\t        var newfacing = new angle_1.Angle(this.facing.angle + mathconst_1.PI0_5);\r\n\t        this.correctposition(map, {\r\n\t            x: this.x + newfacing.cos * delta / (run ? 250 : 500),\r\n\t            y: this.y + newfacing.sin * delta / (run ? 250 : 500)\r\n\t        });\r\n\t    };\r\n\t    Player.prototype.initonmap = function (map) {\r\n\t        while (map.getvalue(Math.floor(this.x), Math.floor(this.y)) > 0) {\r\n\t            this.x += 1;\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.getcontrols = function (controls, map, delta) {\r\n\t        if (controls.forward)\r\n\t            this.moveforward(delta, map, controls.run);\r\n\t        if (controls.backward)\r\n\t            this.movebackward(delta, map);\r\n\t        if (controls.rotateleft)\r\n\t            this.rotateleft(delta, 1);\r\n\t        if (controls.rotateright)\r\n\t            this.rotateright(delta, 1);\r\n\t        if (controls.mouserotateleft)\r\n\t            this.rotateleft(delta, controls.mouserotateleft);\r\n\t        if (controls.mouserotateright)\r\n\t            this.rotateright(delta, controls.mouserotateright);\r\n\t        if (controls.strafeleft)\r\n\t            this.strafeleft(delta, map, controls.run);\r\n\t        if (controls.straferight)\r\n\t            this.straferight(delta, map, controls.run);\r\n\t        if (controls.shoot) {\r\n\t            this.shoot();\r\n\t            controls.shoot = false;\r\n\t        }\r\n\t        controls.resetmouserotate();\r\n\t    };\r\n\t    return Player;\r\n\t}());\r\n\texports.Player = Player;\r\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Mixer = (function () {\r\n\t    function Mixer($loader) {\r\n\t        this.maxchannels = 32;\r\n\t        this.loader = $loader;\r\n\t        this.audiochannels = new Array();\r\n\t        for (var a = 0; a < this.maxchannels; a++) {\r\n\t            this.audiochannels[a] = new Sound();\r\n\t            this.audiochannels[a].audioel = new Audio();\r\n\t            this.audiochannels[a].finish = -1;\r\n\t        }\r\n\t    }\r\n\t    Mixer.prototype.playsound = function (index) {\r\n\t        for (var a = 0; a < this.audiochannels.length; a++) {\r\n\t            var time = new Date();\r\n\t            var now = time.getTime();\r\n\t            console.log(this.loader.sounds[index].duration);\r\n\t            if (this.audiochannels[a].finish < now) {\r\n\t                this.audiochannels[a].finish = now + this.loader.sounds[index].duration * 1000;\r\n\t                this.audiochannels[a].audioel.src = this.loader.sounds[index].src;\r\n\t                this.audiochannels[a].audioel.play();\r\n\t                break;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return Mixer;\r\n\t}());\r\n\texports.Mixer = Mixer;\r\n\tvar Sound = (function () {\r\n\t    function Sound() {\r\n\t    }\r\n\t    return Sound;\r\n\t}());\r\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// app.bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 45b7e85e737c89381043","import { Sprite } from './sprite';\r\nimport { AssetLoader } from './assetloader';\r\nimport { Scene } from './scene';\r\nimport { Controls } from './controls';\r\nimport { Angle } from './angle';\r\nimport { Map } from './map';\r\nimport { Player } from './player';\r\n\r\n\r\nlet fps = document.getElementById('fps')\r\nlet width = window.innerWidth < 1024 ? window.innerWidth : 1024\r\nlet gamesettins = {\r\n    width: width,\r\n    height: Math.floor(width / 1.8),\r\n    fov: 70 * Math.PI / 180,\r\n    drawingdistance: 20,\r\n    floorcolor1: '#3D2F2D',\r\n    floorcolor2: '#261311'\r\n}\r\n\r\nlet assetloader = new AssetLoader()\r\n\r\nassetloader.loadall(\r\n    (prog) => document.getElementById('loading').innerHTML = `Loading: ${Math.ceil(prog * 100)}%` ,\r\n    () => { \r\n        document.getElementById('loading-container').style.display = 'none'; \r\n        let canvas = <HTMLCanvasElement>document.getElementById('gamecanvas')\r\n        let ctx = canvas.getContext('2d')\r\n        let map = new Map(150, 0.3, assetloader)\r\n        let controls = new Controls()\r\n        let player = new Player(map.size / 2 + 0.25, map.size / 2 + 0.25, new Angle(0), assetloader)\r\n        let scene = new Scene(ctx, gamesettins, assetloader)\r\n\r\n        canvas.width = gamesettins.width\r\n        canvas.height = gamesettins.height\r\n        canvas.style.width = `${gamesettins.width}px`\r\n        canvas.style.height = `${gamesettins.height}px`\r\n        controls.bindevents(document, canvas)\r\n        player.initonmap(map)\r\n\r\n\r\n        let lastrender: number = Date.now()\r\n        function render() {\r\n            let now = Date.now()\r\n            let delta = now - lastrender\r\n            lastrender = now\r\n            player.getcontrols(controls, map, delta)\r\n            scene.renderframe(delta, map, player, gamesettins.fov)\r\n            requestAnimationFrame(render)\r\n            fps.innerText = (Math.floor(1000 / delta)).toString()\r\n        }\r\n        render() \r\n    }\r\n)\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/main.ts","export class AssetLoader {\r\n\r\n    constructor() {\r\n        this.wallssrcs = [\r\n            './assets/walls/wall1.jpg',\r\n            './assets/walls/wall2.jpg',\r\n            './assets/walls/wall3.jpg',\r\n            './assets/walls/wall4.jpg',\r\n            './assets/walls/wall5.jpg',\r\n            './assets/walls/wall1b.jpg',\r\n            './assets/walls/wall2b.jpg',\r\n            './assets/walls/wall3b.jpg',\r\n            './assets/walls/wall4b.jpg',\r\n            './assets/walls/wall5b.jpg',\r\n            './assets/walls/wall1c.jpg',\r\n            './assets/walls/wall2c.jpg',\r\n            './assets/walls/wall3c.jpg',\r\n            './assets/walls/wall4c.jpg',\r\n            './assets/walls/wall5c.jpg'\r\n        ]\r\n        \r\n\r\n        this.spritessrcs = [\r\n            './assets/sprites/sprite1.png',\r\n            './assets/sprites/sprite2.png',\r\n            './assets/sprites/sprite3.png',\r\n            './assets/sprites/sprite4.png',\r\n            './assets/sprites/sprite5.png'\r\n        ]\r\n\r\n        this.zspritessrcs = [\r\n            './assets/sprites/zombie1.png',\r\n            './assets/sprites/zombie2.png',\r\n            './assets/sprites/zombie3.png',\r\n            './assets/sprites/zombie4.png'\r\n        ]\r\n\r\n        this.skylinesrcs = [\r\n            './assets/sprites/skyline.jpg'\r\n        ]\r\n\r\n        this.soundssrcs = [\r\n            './assets/sounds/gun.mp3'\r\n        ]\r\n\r\n        this.sprites = new Array<HTMLImageElement>()\r\n        this.zsprites = new Array<HTMLImageElement>()\r\n        this.walls = new Array<HTMLImageElement>()\r\n        this.skyline = new Array<HTMLImageElement>()\r\n        this.sounds = new Array<HTMLAudioElement>()\r\n    }\r\n\r\n    private loaded = 0\r\n    private wallssrcs: Array<string>\r\n    public walls: Array<HTMLImageElement>\r\n    private spritessrcs: Array<string>\r\n    public sprites: Array<HTMLImageElement>\r\n    private zspritessrcs: Array<string>\r\n    public zsprites: Array<HTMLImageElement>\r\n    private skylinesrcs: Array<string>\r\n    public skyline: Array<HTMLImageElement>\r\n    private soundssrcs: Array<string>\r\n    public sounds: Array<HTMLAudioElement>\r\n\r\n    private mobilecheck = function () {\r\n        var check = false;\r\n        (function (a: any) {\r\n            if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\r\n        })(\r\n            navigator.userAgent ||\r\n            navigator.vendor ||\r\n            (<any>window).opera\r\n            );\r\n        return check;\r\n    }\r\n\r\n    private toload() {\r\n        return this.walls.length +\r\n            this.sprites.length +\r\n            this.zsprites.length +\r\n            this.skyline.length +\r\n            (this.mobilecheck() ? 0 : this.sounds.length)\r\n    }\r\n\r\n    private loadimages(\r\n        arrsrc: Array<string>,\r\n        arrobj: Array<HTMLImageElement>,\r\n        onprogress: (prog: number) => void,\r\n        callback: () => void\r\n    ) {\r\n        for (let i in arrsrc) {\r\n            arrobj.push(new Image())\r\n            arrobj[i].onload = () => {\r\n                onprogress(++this.loaded / this.toload())\r\n                if (this.loaded >= this.toload()) callback()\r\n                console.log('loaded ' + arrobj[i])\r\n            }\r\n            arrobj[i].src = arrsrc[i]\r\n        }\r\n    }\r\n\r\n    private loadaudio(\r\n        arrsrc: Array<string>,\r\n        arrobj: Array<HTMLAudioElement>,\r\n        onprogress: (prog: number) => void,\r\n        callback: () => void\r\n    ) {\r\n        for (let i in arrsrc) {\r\n            arrobj.push(new Audio())\r\n            arrobj[i].oncanplaythrough = () => {\r\n                onprogress(++this.loaded / this.toload())\r\n                if (this.loaded >= this.toload()) callback()\r\n                console.log('loaded ' + arrobj[i])\r\n            }\r\n            arrobj[i].src = arrsrc[i]\r\n        }\r\n    }\r\n\r\n    public loadall(\r\n        onprogress: (prog: number) => void,\r\n        callback: () => void\r\n    ) {\r\n        this.loadimages(this.wallssrcs, this.walls, onprogress, callback)\r\n        this.loadimages(this.spritessrcs, this.sprites, onprogress, callback)\r\n        this.loadimages(this.zspritessrcs, this.zsprites, onprogress, callback)\r\n        this.loadimages(this.skylinesrcs, this.skyline, onprogress, callback)\r\n        this.loadaudio(this.soundssrcs, this.sounds, onprogress, callback)\r\n\r\n        var audio = new Audio();\r\n        audio.onload = () => {}\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/assetloader.ts","import { PI0_5, PI1_5, PI2_0 } from './mathconst';\r\nimport { Sprite } from './sprite';\r\nimport { IPoint } from './ipoint';\r\nimport { Angle } from './angle';\r\nimport { Colision } from './colision';\r\nimport { AssetLoader } from './assetloader';\r\nimport { ISettings } from './isettings';\r\nimport { Map } from './map';\r\nimport { Player } from './player';\r\nimport { Controls } from './controls';\r\nimport { Ray } from './ray';\r\nimport { DistanceCalc } from './distancecalc';\r\n\r\nexport class Scene {\r\n\r\n    private lastrender: number\r\n    private height2: number\r\n    private wallheight: number\r\n\r\n    constructor(\r\n        private ctx: CanvasRenderingContext2D,\r\n        private settings: ISettings,\r\n        private assets: AssetLoader\r\n    ) {\r\n        this.lastrender = Date.now()\r\n        this.height2 = Math.floor(settings.height / 2)\r\n        this.wallheight = Math.floor(settings.height * 0.8)\r\n    }\r\n\r\n    private renderbackground(player: Player, fov: number) {\r\n        let image = this.assets.skyline[0]\r\n        let PI4 = 4 * Math.PI\r\n        let sleft = ((PI2_0 - (player.facing.angle + fov / 2)) / PI4) * image.width\r\n        sleft = Math.abs(sleft)\r\n        sleft = Math.floor(sleft)\r\n        let swidth = Math.floor((image.width * fov) / PI4)\r\n        let height = Math.floor(this.settings.height * 0.5)\r\n        this.ctx.drawImage(image, sleft, 0, swidth, image.height, 0, 0, this.settings.width, height)\r\n        this.ctx.fillStyle = this.settings.floorcolor1\r\n        this.ctx.fillRect(0, this.height2, this.settings.width, this.settings.height)\r\n    }\r\n\r\n    private renderwall(\r\n        row: number,\r\n        distance: number,\r\n        image: HTMLImageElement,\r\n        textureposition: number\r\n    ) {\r\n        let height = Math.ceil(this.wallheight / distance)\r\n        let top = Math.floor(this.height2 - height / 2)\r\n        let texleft = Math.floor(textureposition * image.width)\r\n        let shadowdistance = this.settings.drawingdistance * 0.7\r\n        this.ctx.drawImage(image, texleft, 0, 1, image.height, row, top, 1, height)\r\n        if (row % 3 == 0) {\r\n            this.ctx.beginPath()\r\n            this.ctx.moveTo(row, top)\r\n            this.ctx.lineTo(row, this.settings.height - top)\r\n            this.ctx.lineWidth = 4\r\n            this.ctx.strokeStyle = '#000000'\r\n            this.ctx.fillStyle = '#000000'\r\n            this.ctx.globalAlpha = Math.min(distance, shadowdistance) / shadowdistance\r\n            this.ctx.stroke()\r\n            this.ctx.globalAlpha = 1\r\n        }\r\n    }\r\n\r\n    private drawwall(left: number, distance: number, wall: Colision, player: Player) {\r\n        let modx = wall.x - Math.floor(wall.x)\r\n        let mody = wall.y - Math.floor(wall.y)\r\n        let textureposition = Math.abs(modx > mody ? modx : mody)\r\n        if (distance < 3) {\r\n            this.renderwall(left, distance, this.assets.walls[wall.type - 1], textureposition)\r\n        } else if (distance < 8) {\r\n            this.renderwall(left, distance, this.assets.walls[wall.type - 1 + 5], textureposition)\r\n        } else {\r\n            this.renderwall(left, distance, this.assets.walls[wall.type - 1 + 10], textureposition)\r\n        }\r\n    }\r\n\r\n    private drawobject(object: Sprite) {\r\n        let wallheight = Math.ceil(this.wallheight / object.distance)\r\n        let bottom = Math.floor(this.height2 + wallheight / 2)\r\n        let texleft = Math.floor(object.starttexture * object.image.width)\r\n        let texright = Math.floor(object.endtexture * object.image.width)\r\n        let height = Math.floor(wallheight * 0.4)\r\n        let swidth = Math.max(1, texright - texleft)\r\n        let top = bottom - height\r\n        let width = Math.max(1, object.end - object.start)\r\n        this.ctx.drawImage(object.image, texleft, 0, swidth, object.image.height, object.start, top, width, height)\r\n    }\r\n\r\n    private drawfloor(left: number, distance: number, bottom: number, useback: boolean) {\r\n        let height = Math.ceil(this.wallheight / distance)\r\n        let newbottom = Math.floor(this.settings.height - (this.height2 - height / 2))\r\n        if (useback && left % 3 == 0) {\r\n            this.ctx.beginPath()\r\n            this.ctx.moveTo(left, bottom)\r\n            this.ctx.lineTo(left, newbottom)\r\n            this.ctx.lineWidth = 3\r\n            this.ctx.strokeStyle = this.settings.floorcolor2\r\n            this.ctx.stroke()\r\n        }\r\n        return newbottom\r\n    }\r\n\r\n    private filterobjectsinrange(player: Player, sprites: Array<Sprite>) {\r\n        let objectsinrange = new Array<Sprite>()\r\n        for (let i = 0; i < sprites.length; i++) {\r\n            if (\r\n                Math.abs(player.x - sprites[i].x) < this.settings.drawingdistance &&\r\n                Math.abs(player.y - sprites[i].y) < this.settings.drawingdistance\r\n            ) {\r\n                sprites[i].angle = Angle.normalizeangle(Math.atan2(\r\n                    sprites[i].y - player.y,\r\n                    sprites[i].x - player.x\r\n                ))\r\n                objectsinrange.push(sprites[i])\r\n            }\r\n        }\r\n        return objectsinrange\r\n    }\r\n\r\n    private getobjectstodraw(player: Player, sprites: Array<Sprite>, ray: Angle, row: number, walldistance: number) {\r\n        let objecttodraw = new Array<Sprite>()\r\n        for (let object of sprites) {\r\n            object.distance = DistanceCalc.getdistance(player, object)\r\n            if (object.distance < this.settings.drawingdistance && object.distance < walldistance) {\r\n                if (object.distance < 0.25) object.distance = 0.25\r\n                if (ray.angle > PI1_5) ray.angle -= PI2_0\r\n                if (object.angle > PI1_5) object.angle -= PI2_0\r\n                let diff = (ray.angle - object.angle) / (2 * Math.atan2(0.05, object.distance))\r\n                if (Math.abs(diff) <= 1) {\r\n                    diff = Math.abs((diff - 1) * 0.5)\r\n                    if (object.start < 0) {\r\n                        object.start = row\r\n                        object.starttexture = diff\r\n                    }\r\n                    object.end = row\r\n                    object.endtexture = diff\r\n                    objecttodraw.push(object)\r\n                }\r\n            }\r\n        }\r\n        return objecttodraw\r\n    }\r\n\r\n    public renderframe(delta: number, map: Map, player: Player, fov: number) {\r\n        this.renderbackground(player, fov)\r\n\r\n        let allobjecttodraw = new Array<Sprite>()\r\n        let objectsinrange = this.filterobjectsinrange(player, map.sprites)\r\n        let zombiesingange = this.filterobjectsinrange(player, map.zombies)\r\n\r\n        let rays = player.getrays(this.settings.width, this.settings.fov)\r\n        let drawfloor = (Math.floor(player.x) + Math.floor(player.y)) % 2 == 0\r\n\r\n        for (let r = 0; r < rays.length; r++) {\r\n            let bottom = this.settings.height\r\n            let drawfloorray = drawfloor\r\n            let walldistance: number\r\n            let cos = Math.cos(player.facing.angle - rays[r].angle)\r\n            let colisions = Ray.cast(map, player, null, null, rays[r], this.settings.drawingdistance)\r\n\r\n            for (let colision of colisions) {\r\n                let distance = DistanceCalc.getdistance(player, colision) * cos\r\n                if (colision.type > 0) {\r\n                    walldistance = distance\r\n                    this.drawwall(r, distance, colision, player)\r\n                }\r\n                bottom = this.drawfloor(r, distance, bottom, drawfloorray)\r\n                drawfloorray = !drawfloorray\r\n            }\r\n\r\n            let objecttodraw = this.getobjectstodraw(player, objectsinrange, rays[r], r, walldistance)\r\n            let zombiestodraw = this.getobjectstodraw(player, zombiesingange, rays[r], r, walldistance)\r\n            allobjecttodraw = objecttodraw.concat(zombiestodraw)\r\n        }\r\n\r\n        for (let object of objectsinrange) {\r\n            if (object.start >= 0) this.drawobject(object)\r\n            object.start = -1\r\n        }\r\n        for (let object of zombiesingange) {\r\n            if (object.start >= 0) this.drawobject(object)\r\n            object.start = -1\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/scene.ts","export const PI0_5: number = Math.PI / 2\r\nexport const PI1_0: number = Math.PI    \r\nexport const PI1_5: number = 3 * Math.PI / 2 \r\nexport const PI2_0: number = 2 * Math.PI\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/mathconst.ts","import { PI2_0 } from './mathconst';\r\n\r\nexport class Angle {\r\n    public angle: number\r\n    public sin: number\r\n    public cos: number\r\n    public tg: number\r\n    public ctg: number\r\n    public dx: number\r\n    public dy: number\r\n\r\n    constructor(angle: number) {\r\n        this.angle = Angle.normalizeangle(angle)\r\n        this.sin = Math.sin(angle)\r\n        this.cos = Math.cos(angle)\r\n        this.tg = this.sin / this.cos\r\n        this.ctg = this.cos / this.sin\r\n        this.dx = this.cos > 0 ? 1 : 0\r\n        this.dy = this.sin > 0 ? 1 : 0\r\n    }\r\n\r\n    public static normalizeangle(angle: number) {\r\n        if(angle < 0) angle += PI2_0\r\n        if(angle > PI2_0) angle -= PI2_0\r\n        return angle\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/angle.ts","import { IManhattanDist } from './imanhattandist';\r\nimport { IPoint } from './ipoint';\r\nimport { Colision } from './colision';\r\nimport { PI0_5, PI1_0, PI1_5 } from './mathconst'\r\nimport { Angle } from './angle';\r\nimport { Map } from './map';\r\n\r\nexport class Ray {\r\n\r\n    public static nearesty(origin: IPoint, facing: Angle): IManhattanDist {\r\n        let nexty = Math.floor(origin.y + facing.dy)\r\n        if (nexty == origin.y) nexty -= 1\r\n        let dy = nexty - origin.y\r\n        let dx = facing.ctg * dy\r\n        return {\r\n            x: dx + origin.x,\r\n            y: nexty,\r\n            manhattandistance: Math.abs(dx) + Math.abs(dy)\r\n        }\r\n    }\r\n\r\n    public static nearestx(origin: IPoint, facing: Angle): IManhattanDist {\r\n        let nextx = Math.floor(origin.x + facing.dx)\r\n        if (nextx == origin.x) nextx -= 1\r\n        let dx = nextx - origin.x\r\n        let dy = facing.tg * dx\r\n        return {\r\n            x: nextx,\r\n            y: dy + origin.y,\r\n            manhattandistance: Math.abs(dx) + Math.abs(dy)\r\n        }\r\n    }\r\n\r\n    public static cast(\r\n        map: Map,\r\n        origin: IPoint,\r\n        nexth: IManhattanDist,\r\n        nextv: IManhattanDist,\r\n        facing: Angle,\r\n        maxdistance: number\r\n    ): Colision[] {\r\n\r\n        if (maxdistance < 1) return []\r\n\r\n        let h = nexth || Ray.nearesty(origin, facing)\r\n        let v = nextv || Ray.nearestx(origin, facing)\r\n\r\n        if (h.manhattandistance < v.manhattandistance) {\r\n            v.manhattandistance -= h.manhattandistance\r\n            let type = map.getvalue(Math.floor(h.x), h.y - (facing.dy > 0 ? 0 : 1))\r\n            if (type > 0) {\r\n                return [new Colision(h.x, h.y, type)]\r\n            } else {\r\n                return [new Colision(h.x, h.y, type)]\r\n                    .concat(Ray.cast(map, h, null, v, facing, maxdistance - h.manhattandistance))\r\n            }\r\n        } else {\r\n            h.manhattandistance -= v.manhattandistance\r\n            let type = map.getvalue(v.x - (facing.dx > 0 ? 0 : 1), Math.floor(v.y))\r\n            if (type > 0) {\r\n                return [new Colision(v.x, v.y, type)]\r\n            } else {\r\n                return [new Colision(v.x, v.y, type)]\r\n                    .concat(Ray.cast(map, v, h, null, facing, maxdistance - v.manhattandistance))\r\n            }\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/ray.ts","import {IPoint} from './ipoint';\r\nexport class Colision implements IPoint {\r\n    constructor(\r\n        public x: number,\r\n        public y: number,\r\n        public type: number\r\n    ) {\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/colision.ts","import { IPoint } from './ipoint';\r\nexport class DistanceCalc {\r\n    public static getdistance(a: IPoint, b: IPoint) {\r\n        return Math.sqrt(\r\n            (a.x - b.x) * (a.x - b.x) +\r\n            (a.y - b.y) * (a.y - b.y)\r\n        )\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/distancecalc.ts","export class Controls {\r\n    public rotateleft: boolean = false\r\n    public rotateright: boolean = false\r\n    public forward: boolean = false\r\n    public backward: boolean = false\r\n    public run: boolean = false\r\n    public strafeleft: boolean = false\r\n    public straferight: boolean = false\r\n    public mouserotateleft: number = 0\r\n    public mouserotateright: number = 0\r\n    public shoot: boolean = false\r\n\r\n    public mousemove(e: MouseEvent) {\r\n        if (e.movementX < 0) {\r\n            this.mouserotateleft = -e.movementX / 5\r\n            this.mouserotateright = 0\r\n        } else if (e.movementX > 0) {\r\n            this.mouserotateleft = 0\r\n            this.mouserotateright = e.movementX / 5\r\n        }\r\n    }\r\n\r\n    public resetmouserotate() {\r\n        this.mouserotateleft = 0\r\n        this.mouserotateright = 0\r\n    }\r\n\r\n    public keydown(e: KeyboardEvent) {\r\n        if (e.keyCode == 17) this.shoot = true\r\n        if (e.keyCode == 37) this.rotateleft = true\r\n        if (e.keyCode == 68) this.strafeleft = true\r\n        if (e.keyCode == 39) this.rotateright = true\r\n        if (e.keyCode == 65) this.straferight = true\r\n        if (e.keyCode == 38 || e.keyCode == 87) this.forward = true\r\n        if (e.keyCode == 40 || e.keyCode == 83) this.backward = true\r\n        this.run = e.shiftKey\r\n    }\r\n\r\n    public touchstart(e: TouchEvent, canvas: HTMLCanvasElement) {\r\n        var t = e.touches[0];\r\n        this.touchend(e);\r\n        if (t.pageY < canvas.height * 0.5) {\r\n            this.shoot = true\r\n        } else {\r\n            if (t.pageX < window.innerWidth * 0.333) this.rotateleft = true\r\n            else if (t.pageX < window.innerWidth * 0.666) this.forward = true\r\n            else this.rotateright = true\r\n        }\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    public touchend(e: TouchEvent) {\r\n        this.rotateleft = false\r\n        this.rotateright = false\r\n        this.forward = false\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    public keyup(e: KeyboardEvent) {\r\n        if (e.keyCode == 37) this.rotateleft = false\r\n        if (e.keyCode == 68) this.strafeleft = false\r\n        if (e.keyCode == 39) this.rotateright = false\r\n        if (e.keyCode == 65) this.straferight = false\r\n        if (e.keyCode == 38 || e.keyCode == 87) this.forward = false\r\n        if (e.keyCode == 40 || e.keyCode == 83) this.backward = false\r\n        this.run = e.shiftKey\r\n    }\r\n\r\n    public bindevents(doc: HTMLDocument, canvas: HTMLCanvasElement) {\r\n        doc.addEventListener('keydown', (e) => this.keydown(e), false)\r\n        doc.addEventListener('keyup', (e) => this.keyup(e), false)\r\n        doc.addEventListener('pointerlockchange', (e) => { this.lockChangeAlert(doc, canvas) }, false)\r\n        doc.addEventListener('mozpointerlockchange', (e) => { this.lockChangeAlert(doc, canvas) }, false)\r\n        canvas.addEventListener('touchstart', (e) => { this.touchstart(e, canvas) }, false)\r\n        canvas.addEventListener('touchend', (e) => { this.touchend(e) }, false)\r\n        canvas.addEventListener('click', (e) => {\r\n            canvas.requestPointerLock = canvas.requestPointerLock || (<any>canvas).mozRequestPointerLock\r\n            canvas.requestPointerLock()\r\n            this.shoot = true\r\n        }, false)\r\n    }\r\n\r\n    private mousemovefunction = (e: MouseEvent) => this.mousemove(e)\r\n    private lockChangeAlert(doc: HTMLDocument, canvas: HTMLElement) {\r\n        let canvaselement = <HTMLCanvasElement>document.getElementById('gamecanvas')\r\n        if (doc.pointerLockElement === canvaselement || (<any>document).mozPointerLockElement === canvas) {\r\n            doc.addEventListener(\"mousemove\", this.mousemovefunction, false)\r\n        } else {\r\n            doc.removeEventListener(\"mousemove\", this.mousemovefunction, false)\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/controls.ts","import {AssetLoader} from './assetloader';\r\nimport { Sprite } from './sprite';\r\n\r\nexport class Map {\r\n    public map: Uint8Array\r\n    public size: number\r\n    public sprites: Array<Sprite>\r\n    public zombies: Array<Sprite>\r\n\r\n    constructor(size: number, randparam: number, assetloader: AssetLoader) {\r\n        this.map = new Uint8Array(size * size)\r\n        this.size = size\r\n\r\n        this.randomize(randparam)\r\n\r\n        this.sprites = new Array<Sprite>()\r\n        for (let i = 0; i < size * 25; i++) {\r\n            this.sprites.push(\r\n                new Sprite(\r\n                    Math.random() * size,\r\n                    Math.random() * size,\r\n                    assetloader.sprites[Math.floor(Math.random() * assetloader.sprites.length)]\r\n                )\r\n            )\r\n        }\r\n\r\n        this.zombies = new Array<Sprite>()\r\n        for (let i = 0; i < size * 25; i++) {\r\n            this.zombies.push(\r\n                new Sprite(\r\n                    Math.random() * size,\r\n                    Math.random() * size,\r\n                    assetloader.zsprites[Math.floor(Math.random() * assetloader.zsprites.length)]\r\n                )\r\n            )\r\n        }\r\n    }\r\n\r\n    public setvalue(x: number, y: number, value: number) {\r\n        let pos = this.size * y + x\r\n        if (pos < this.map.length && pos >= 0) {\r\n            this.map[this.size * y + x] = value\r\n        }\r\n    }\r\n\r\n    public getvalue(x: number, y: number) {\r\n        if (x >= 0 && y >= 0 && x < this.size && y < this.size) {\r\n            let pos = this.size * y + x\r\n            return this.map[pos]\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public randomize(randparam: number) {\r\n        for (let i = 0; i < this.map.length; i++) {\r\n            if (Math.random() < randparam) {\r\n                if (Math.random() < 0.1) {\r\n                    this.map[i] = 5\r\n                } else if (Math.random() < 0.1) {\r\n                    this.map[i] = 4\r\n                } else if (Math.random() < 0.3) {\r\n                    this.map[i] = 3\r\n                } else if (Math.random() < 0.5) {\r\n                    this.map[i] = 2\r\n                } else {\r\n                    this.map[i] = 1\r\n                }\r\n            } else {\r\n                this.map[i] = 0\r\n            }\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/map.ts","import { Angle } from './angle';\r\nimport { IPoint } from './ipoint';\r\nexport class Sprite implements IPoint {\r\n\r\n    public angle: number\r\n    public start: number = -1\r\n    public starttexture: number\r\n    public end: number\r\n    public endtexture: number\r\n    public distance: number\r\n\r\n    constructor(\r\n        public x: number,\r\n        public y: number,\r\n        public image: HTMLImageElement\r\n    ) {\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/sprite.ts","import { AssetLoader } from './assetloader';\r\nimport { Mixer } from './sounds/mixer';\r\nimport { PI0_5 } from './mathconst';\r\nimport { Map } from './map';\r\nimport { Controls } from './controls';\r\nimport { IPoint } from './ipoint';\r\nimport { Angle } from './angle';\r\n\r\nexport class Player implements IPoint {\r\n\r\n    private mixer: Mixer\r\n    private guncooldown = 0\r\n\r\n    constructor(\r\n        public x: number,\r\n        public y: number,\r\n        public facing: Angle,\r\n        private loader: AssetLoader\r\n    ) {\r\n        if (loader != null) this.mixer = new Mixer(loader)\r\n    }\r\n\r\n    public getrays(columns: number, fov: number) {\r\n        var step = fov / columns\r\n        var angle = this.facing.angle + fov / 2\r\n        var rays = new Array<Angle>()\r\n        for (let i = 0; i < columns; i++) {\r\n            rays.push(new Angle(angle))\r\n            angle -= step\r\n        }\r\n        return rays\r\n    }\r\n\r\n    public shoot() {\r\n        let time = (new Date()).getTime()\r\n        if (this.guncooldown < time) {\r\n            this.mixer.playsound(0)\r\n            this.guncooldown = time + 750\r\n        }\r\n    }\r\n\r\n    public rotateleft(delta: number, movement: number) {\r\n        this.facing = new Angle(this.facing.angle + Math.PI * movement * delta / 1200)\r\n    }\r\n\r\n    public rotateright(delta: number, movement: number) {\r\n        this.facing = new Angle(this.facing.angle - Math.PI * movement * delta / 1200)\r\n    }\r\n\r\n    private correctposition(map: Map, newposition: IPoint) {\r\n        if (map.getvalue(Math.floor(newposition.x), Math.floor(this.y)) > 0) {\r\n            newposition.x = this.x\r\n        }\r\n        if (map.getvalue(Math.floor(this.x), Math.floor(newposition.y)) > 0) {\r\n            newposition.y = this.y\r\n        }\r\n        this.x = newposition.x\r\n        this.y = newposition.y\r\n    }\r\n\r\n    public moveforward(delta: number, map: Map, run: boolean) {\r\n        let position = {\r\n            x: this.x + this.facing.cos * delta / (run ? 250 : 500),\r\n            y: this.y + this.facing.sin * delta / (run ? 250 : 500)\r\n        }\r\n        this.correctposition(map, position)\r\n    }\r\n\r\n    public movebackward(delta: number, map: Map) {\r\n        this.correctposition(map, {\r\n            x: this.x - this.facing.cos * delta / 500,\r\n            y: this.y - this.facing.sin * delta / 500\r\n        })\r\n    }\r\n\r\n    public strafeleft(delta: number, map: Map, run: boolean) {\r\n        let newfacing = new Angle(this.facing.angle - PI0_5)\r\n        this.correctposition(map, {\r\n            x: this.x + newfacing.cos * delta / (run ? 250 : 500),\r\n            y: this.y + newfacing.sin * delta / (run ? 250 : 500)\r\n        })\r\n    }\r\n\r\n    public straferight(delta: number, map: Map, run: boolean) {\r\n        let newfacing = new Angle(this.facing.angle + PI0_5)\r\n        this.correctposition(map, {\r\n            x: this.x + newfacing.cos * delta / (run ? 250 : 500),\r\n            y: this.y + newfacing.sin * delta / (run ? 250 : 500)\r\n        })\r\n    }\r\n\r\n    public initonmap(map: Map) {\r\n        while (map.getvalue(Math.floor(this.x), Math.floor(this.y)) > 0) {\r\n            this.x += 1\r\n        }\r\n    }\r\n\r\n    public getcontrols(controls: Controls, map: Map, delta: number) {\r\n        if (controls.forward) this.moveforward(delta, map, controls.run)\r\n        if (controls.backward) this.movebackward(delta, map)\r\n        if (controls.rotateleft) this.rotateleft(delta, 1)\r\n        if (controls.rotateright) this.rotateright(delta, 1)\r\n        if (controls.mouserotateleft) this.rotateleft(delta, controls.mouserotateleft)\r\n        if (controls.mouserotateright) this.rotateright(delta, controls.mouserotateright)\r\n        if (controls.strafeleft) this.strafeleft(delta, map, controls.run)\r\n        if (controls.straferight) this.straferight(delta, map, controls.run)\r\n        if (controls.shoot) {\r\n            this.shoot()\r\n            controls.shoot = false\r\n        }\r\n        controls.resetmouserotate()\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/player.ts","import { AssetLoader } from '../assetloader';\r\n\r\nexport class Mixer {\r\n    \r\n\tconstructor($loader: AssetLoader ) {\r\n\t\tthis.loader = $loader\r\n        this.audiochannels = new Array<Sound>()\r\n        for (let a = 0; a < this.maxchannels; a++) {\r\n            this.audiochannels[a] = new Sound()\r\n            this.audiochannels[a].audioel = new Audio();\r\n            this.audiochannels[a].finish = -1\r\n        }\r\n\t}\r\n    \r\n    private loader: AssetLoader\r\n    private maxchannels: number = 32\r\n    private audiochannels: Array<Sound>\r\n\r\n    public playsound(index: number) {\r\n        for (let a = 0; a < this.audiochannels.length; a++) {\r\n            let time = new Date()\r\n            let now = time.getTime()\r\n            console.log(this.loader.sounds[index].duration)\r\n            if (this.audiochannels[a].finish < now) {\r\n                this.audiochannels[a].finish = now + this.loader.sounds[index].duration * 1000\r\n                this.audiochannels[a].audioel.src = this.loader.sounds[index].src\r\n                this.audiochannels[a].audioel.play()\r\n                break\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass Sound {\r\n    public finish: number\r\n    public audioel: HTMLAudioElement\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/sounds/mixer.ts"],"sourceRoot":""}