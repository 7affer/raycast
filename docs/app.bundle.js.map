{"version":3,"sources":["webpack:///webpack/bootstrap 9a9f19b54de019330293","webpack:///./src/scripts/main.ts","webpack:///./src/scripts/sprite.ts","webpack:///./src/scripts/assetloader.ts","webpack:///./src/scripts/scene.ts","webpack:///./src/scripts/mathconst.ts","webpack:///./src/scripts/ray.ts","webpack:///./src/scripts/colision.ts","webpack:///./src/scripts/distancecalc.ts","webpack:///./src/scripts/controls.ts","webpack:///./src/scripts/angle.ts","webpack:///./src/scripts/map.ts","webpack:///./src/scripts/player.ts","webpack:///./src/styles.scss"],"names":[],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9a9f19b54de019330293","import { Sprite } from './sprite';\r\nimport { AssetLoader } from './assetloader';\r\nimport { Scene } from './scene';\r\nimport { Controls } from './controls';\r\nimport { Angle } from './angle';\r\nimport { Map } from './map';\r\nimport { Player } from './player';\r\n\r\n\r\nlet fps = document.getElementById('fps')\r\nlet width = window.innerWidth < 1024 ? window.innerWidth : 1024\r\nlet gamesettins = {\r\n    width: width,\r\n    height: Math.floor(width / 1.8),\r\n    fov: 70 * Math.PI / 180,\r\n    drawingdistance: 20,\r\n    floorcolor1: '#000011',\r\n    floorcolor2: '#111122'\r\n}\r\n\r\nlet canvas = <HTMLCanvasElement>document.getElementById('gamecanvas')\r\nlet ctx = canvas.getContext('2d')\r\nlet map = new Map(150, 0.3)\r\nlet player = new Player({ x: map.size / 2 + 0.25, y: map.size / 2 + 0.25 }, new Angle(0), gamesettins.fov)\r\nlet controls = new Controls()\r\nlet assetloader = new AssetLoader()\r\nlet scene = new Scene(ctx, gamesettins, assetloader)\r\nlet sprites = new Array<Sprite>()\r\nfor (let i = 0; i < map.size * 25; i++) {\r\n    sprites.push(\r\n        new Sprite({\r\n            x: Math.random() * map.size,\r\n            y: Math.random() * map.size\r\n        },\r\n            Math.floor(Math.random() * 5)\r\n        )\r\n    )\r\n}\r\n\r\ncanvas.width = gamesettins.width\r\ncanvas.height = gamesettins.height\r\ncanvas.style.width = `${gamesettins.width}px`\r\ncanvas.style.height = `${gamesettins.height}px`\r\ncontrols.bindevents(document, canvas)\r\nplayer.initonmap(map)\r\n\r\nlet objectsinrange = new Array<Sprite>()\r\nlet lastrender: number = Date.now()\r\nfunction render() {\r\n    let now = Date.now()\r\n    let delta = now - lastrender\r\n    lastrender = now\r\n\r\n    objectsinrange = new Array<Sprite>()\r\n    for (let i = 0; i < sprites.length; i++) {\r\n        if (\r\n            Math.abs(player.position.x - sprites[i].position.x) < gamesettins.drawingdistance &&\r\n            Math.abs(player.position.y - sprites[i].position.y) < gamesettins.drawingdistance\r\n        ) {\r\n            sprites[i].angle = Angle.normalizeangle(Math.atan2(\r\n                sprites[i].position.y - player.position.y,\r\n                sprites[i].position.x - player.position.x\r\n            ))\r\n            objectsinrange.push(sprites[i])\r\n        }\r\n    }\r\n\r\n    player.getcontrols(controls, map, delta)\r\n    scene.renderframe(delta, map, player, objectsinrange)\r\n    requestAnimationFrame(render)\r\n    fps.innerText = (Math.floor(1000 / delta)).toString()\r\n}\r\nassetloader.loadall(\r\n    (prog) => document.getElementById('loading').innerHTML = `Loading: ${Math.ceil(prog * 100)}%` ,\r\n    () => { document.getElementById('loading-container').style.display = 'none'; render() }\r\n)\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/main.ts","import { Angle } from './angle';\r\nimport { IPoint } from './ipoint';\r\nexport class Sprite {\r\n\r\n    public angle: number\r\n    public start: number = -1\r\n    public starttexture: number\r\n    public end: number\r\n    public endtexture: number\r\n    public distance: number\r\n\r\n    constructor(\r\n        public position: IPoint,\r\n        public type: number\r\n    ) {\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/sprite.ts","export class AssetLoader {\r\n\r\n    constructor() {\r\n        this.wallssrcs = [\r\n            './assets/walls/wall1.jpg',\r\n            './assets/walls/wall2.jpg',\r\n            './assets/walls/wall3.jpg',\r\n            './assets/walls/wall4.jpg',\r\n            './assets/walls/wall5.jpg',\r\n            './assets/walls/wall1b.jpg',\r\n            './assets/walls/wall2b.jpg',\r\n            './assets/walls/wall3b.jpg',\r\n            './assets/walls/wall4b.jpg',\r\n            './assets/walls/wall5b.jpg',\r\n            './assets/walls/wall1c.jpg',\r\n            './assets/walls/wall2c.jpg',\r\n            './assets/walls/wall3c.jpg',\r\n            './assets/walls/wall4c.jpg',\r\n            './assets/walls/wall5c.jpg'\r\n        ]\r\n        this.walls = new Array<HTMLImageElement>()\r\n        for (let item in this.wallssrcs) this.walls.push(new Image())\r\n\r\n        this.spritessrcs = [\r\n            './assets/sprites/sprite1.png',\r\n            './assets/sprites/sprite2.png',\r\n            './assets/sprites/sprite3.png',\r\n            './assets/sprites/sprite4.png',\r\n            './assets/sprites/sprite5.png'\r\n        ]\r\n        this.sprites = new Array<HTMLImageElement>()\r\n        for (let item in this.spritessrcs) this.sprites.push(new Image())\r\n\r\n        this.skylinesrcs = [\r\n            './assets/sprites/skyline.jpg'\r\n        ]\r\n        this.skyline = new Array<HTMLImageElement>()\r\n        for (let item in this.skylinesrcs) this.skyline.push(new Image())\r\n    }\r\n\r\n    private loaded = 0\r\n    private wallssrcs: Array<string>\r\n    public walls: Array<HTMLImageElement>\r\n    private spritessrcs: Array<string>\r\n    public sprites: Array<HTMLImageElement>\r\n    private skylinesrcs: Array<string>\r\n    public skyline: Array<HTMLImageElement>\r\n\r\n    private isloaded() {\r\n        return this.loaded == this.toload()\r\n    }\r\n\r\n    private toload() {\r\n        return this.walls.length + this.sprites.length + this.skyline.length\r\n    }\r\n\r\n    public loadall(\r\n        onprogress: (prog:number) => void,\r\n        callback: () => void\r\n    ) {\r\n        for (let i in this.wallssrcs) {\r\n            this.walls[i].onload = () => {\r\n                this.loaded += 1\r\n                onprogress(this.loaded / this.toload())\r\n                if (this.isloaded()) callback()\r\n            }\r\n            this.walls[i].src = this.wallssrcs[i]\r\n        }\r\n\r\n        for (let i in this.spritessrcs) {\r\n            this.sprites[i].onload = () => {\r\n                this.loaded += 1\r\n                onprogress(this.loaded / this.toload())\r\n                if (this.isloaded()) callback()\r\n            }\r\n            this.sprites[i].src = this.spritessrcs[i]\r\n        }\r\n\r\n        for (let i in this.skylinesrcs) {\r\n            this.skyline[i].onload = () => {\r\n                this.loaded += 1\r\n                onprogress(this.loaded / this.toload())\r\n                if (this.isloaded()) callback()\r\n            }\r\n            this.skyline[i].src = this.skylinesrcs[i]\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/assetloader.ts","import { PI0_5, PI1_5, PI2_0 } from './mathconst';\r\nimport { Sprite } from './sprite';\r\nimport { IPoint } from './ipoint';\r\nimport { Angle } from './angle';\r\nimport { Colision } from './colision';\r\nimport { AssetLoader } from './assetloader';\r\nimport { ISettings } from './isettings';\r\nimport { Map } from './map';\r\nimport { Player } from './player';\r\nimport { Controls } from './controls';\r\nimport { Ray } from './ray';\r\nimport { DistanceCalc } from './distancecalc';\r\n\r\nexport class Scene {\r\n\r\n    private lastrender: number\r\n    private height2: number\r\n    private wallheight: number\r\n\r\n    constructor(\r\n        private ctx: CanvasRenderingContext2D,\r\n        private settings: ISettings,\r\n        private assets: AssetLoader\r\n    ) {\r\n        this.lastrender = Date.now()\r\n        this.height2 = Math.floor(settings.height / 2)\r\n        this.wallheight = Math.floor(settings.height * 0.8)\r\n    }\r\n\r\n    private renderbackground(player: Player) {\r\n        // var grdceiling = this.ctx.createLinearGradient(0, 0, 0, this.height2);\r\n        // grdceiling.addColorStop(0, '#aaaaaa');\r\n        // grdceiling.addColorStop(1, '#222222');\r\n        // this.ctx.fillStyle = grdceiling;\r\n        // this.ctx.fillRect(0, 0, this.settings.width, this.height2)\r\n\r\n        let image = this.assets.skyline[0]\r\n        let PI4 = 4 * Math.PI\r\n        let sleft = ((PI2_0 - (player.facing.angle + player.fov / 2)) / PI4) * image.width\r\n        sleft = Math.abs(sleft)\r\n        sleft = Math.floor(sleft)\r\n        let swidth = Math.floor((image.width * player.fov) / PI4)\r\n        let height = Math.floor(this.settings.height * 0.5)\r\n        this.ctx.drawImage(image, sleft, 0, swidth, image.height, 0, 0, this.settings.width, height)\r\n        this.ctx.fillStyle = this.settings.floorcolor1\r\n        this.ctx.fillRect(0, this.height2, this.settings.width, this.settings.height)\r\n    }\r\n\r\n    private renderwall(\r\n        row: number,\r\n        distance: number,\r\n        image: HTMLImageElement,\r\n        textureposition: number\r\n    ) {\r\n        let height = Math.ceil(this.wallheight / distance)\r\n        let top = Math.floor(this.height2 - height / 2)\r\n        let texleft = Math.floor(textureposition * image.width)\r\n        this.ctx.drawImage(image, texleft, 0, 1, image.height, row, top, 1, height)\r\n        if (row % 3 == 0) {\r\n            this.ctx.beginPath()\r\n            this.ctx.moveTo(row, top)\r\n            this.ctx.lineTo(row, this.settings.height - top)\r\n            this.ctx.lineWidth = 4\r\n            this.ctx.strokeStyle = '#000000'\r\n            this.ctx.fillStyle = '#000000'\r\n            this.ctx.globalAlpha = (distance / this.settings.drawingdistance) * 0.8\r\n            this.ctx.stroke()\r\n            this.ctx.globalAlpha = 1\r\n        }\r\n    }\r\n\r\n    private drawwall(left: number, distance: number, wall: Colision, player: Player) {\r\n        let modx = wall.point.x - Math.floor(wall.point.x)\r\n        let mody = wall.point.y - Math.floor(wall.point.y)\r\n        let textureposition = Math.abs(modx > mody ? modx : mody)\r\n        if (distance < 3) {\r\n            this.renderwall(left, distance, this.assets.walls[wall.type - 1], textureposition)\r\n        } else if (distance < 8) {\r\n            this.renderwall(left, distance, this.assets.walls[wall.type - 1 + 5], textureposition)\r\n        } else {\r\n            this.renderwall(left, distance, this.assets.walls[wall.type - 1 + 10], textureposition)\r\n        }\r\n    }\r\n\r\n    private drawobject(object: Sprite) {\r\n        let wallheight = Math.ceil(this.wallheight / object.distance)\r\n        let bottom = Math.floor(this.height2 + wallheight / 2)\r\n        let image = this.assets.sprites[object.type]\r\n        let texleft = Math.floor(object.starttexture * image.width)\r\n        let texright = Math.floor(object.endtexture * image.width)\r\n        let height = Math.floor(wallheight * 0.4)\r\n        let swidth = Math.max(1, texright - texleft)\r\n        let top = bottom - height\r\n        let width = Math.max(1, object.end - object.start)\r\n        this.ctx.drawImage(image, texleft, 0, swidth, image.height, object.start, top, width, height)\r\n    }\r\n\r\n    private drawfloor(left: number, distance: number, bottom: number, useback: boolean) {\r\n        let height = Math.ceil(this.wallheight / distance)\r\n        let newbottom = Math.floor(this.settings.height - (this.height2 - height / 2))\r\n        if (useback && left % 3 == 0) {\r\n            this.ctx.beginPath()\r\n            this.ctx.moveTo(left, bottom)\r\n            this.ctx.lineTo(left, newbottom)\r\n            this.ctx.lineWidth = 3\r\n            this.ctx.strokeStyle = this.settings.floorcolor2\r\n            this.ctx.stroke()\r\n        }\r\n        return newbottom\r\n    }\r\n\r\n    public renderframe(delta: number, map: Map, player: Player, objects: Array<Sprite>) {\r\n        this.renderbackground(player)\r\n        let rays = player.getrays(this.settings.width)\r\n        let drawfloor = (Math.floor(player.position.x) + Math.floor(player.position.y)) % 2 == 0\r\n\r\n        for (let r = 0; r < rays.length; r++) {\r\n            let bottom = this.settings.height\r\n            let drawfloorray = drawfloor\r\n            let walldistance: number\r\n            let cos = Math.cos(player.facing.angle - rays[r].angle)\r\n            let colisions = Ray.cast(map, player.position, null, null, rays[r], this.settings.drawingdistance)\r\n\r\n            for (let colision of colisions) {\r\n                let distance = DistanceCalc.getdistance(player.position, colision.point) * cos\r\n                if (colision.type > 0) {\r\n                    walldistance = distance\r\n                    this.drawwall(r, distance, colision, player)\r\n                }\r\n                bottom = this.drawfloor(r, distance, bottom, drawfloorray)\r\n                drawfloorray = !drawfloorray\r\n            }\r\n\r\n            for (let object of objects) {\r\n                object.distance = DistanceCalc.getdistance(player.position, object.position)\r\n                if (object.distance < this.settings.drawingdistance && object.distance < walldistance) {\r\n                    if (object.distance < 0.25) object.distance = 0.25\r\n                    if (rays[r].angle > PI1_5) rays[r].angle -= PI2_0\r\n                    if (object.angle > PI1_5) object.angle -= PI2_0\r\n                    let diff = (rays[r].angle - object.angle) / (2 * Math.atan2(0.05, object.distance))\r\n                    if (Math.abs(diff) <= 1) {\r\n                        diff = Math.abs((diff - 1) * 0.5)\r\n                        if (object.start < 0) {\r\n                            object.start = r\r\n                            object.starttexture = diff\r\n                        }\r\n                        object.end = r\r\n                        object.endtexture = diff\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let object of objects) {\r\n            if (object.start >= 0) this.drawobject(object)\r\n            object.start = -1\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/scene.ts","export const PI0_5: number = Math.PI / 2\r\nexport const PI1_0: number = Math.PI    \r\nexport const PI1_5: number = 3 * Math.PI / 2 \r\nexport const PI2_0: number = 2 * Math.PI\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/mathconst.ts","import { IManhattanDist } from './imanhattandist';\r\nimport { IPoint } from './ipoint';\r\nimport { Colision } from './colision';\r\nimport { PI0_5, PI1_0, PI1_5 } from './mathconst'\r\nimport { Angle } from './angle';\r\nimport { Map } from './map';\r\n\r\nexport class Ray {\r\n\r\n    public static nearesty(origin: IPoint, facing: Angle): IManhattanDist {\r\n        let nexty = Math.floor(origin.y + facing.dy)\r\n        if (nexty == origin.y) nexty -= 1\r\n        let dy = nexty - origin.y\r\n        let dx = facing.ctg * dy\r\n        return {\r\n            x: dx + origin.x,\r\n            y: nexty,\r\n            manhattandistance: Math.abs(dx) + Math.abs(dy)\r\n        }\r\n    }\r\n\r\n    public static nearestx(origin: IPoint, facing: Angle): IManhattanDist {\r\n        let nextx = Math.floor(origin.x + facing.dx)\r\n        if (nextx == origin.x) nextx -= 1\r\n        let dx = nextx - origin.x\r\n        let dy = facing.tg * dx\r\n        return {\r\n            x: nextx,\r\n            y: dy + origin.y,\r\n            manhattandistance: Math.abs(dx) + Math.abs(dy)\r\n        }\r\n    }\r\n\r\n    public static cast(\r\n        map: Map,\r\n        origin: IPoint,\r\n        nexth: IManhattanDist,\r\n        nextv: IManhattanDist,\r\n        facing: Angle,\r\n        maxdistance: number\r\n    ): Colision[] {\r\n\r\n        if (maxdistance < 1) return []\r\n\r\n        let h = nexth || Ray.nearesty(origin, facing)\r\n        let v = nextv || Ray.nearestx(origin, facing)\r\n\r\n        if (h.manhattandistance < v.manhattandistance) {\r\n            v.manhattandistance -= h.manhattandistance\r\n            let type = map.getvalue(Math.floor(h.x), h.y - (facing.dy > 0 ? 0 : 1))\r\n            if (type > 0) {\r\n                return [new Colision(h, type)]\r\n            } else {\r\n                return [new Colision(h, type)]\r\n                    .concat(Ray.cast(map, h, null, v, facing, maxdistance - h.manhattandistance))\r\n            }\r\n        } else {\r\n            h.manhattandistance -= v.manhattandistance\r\n            let type = map.getvalue(v.x - (facing.dx > 0 ? 0 : 1), Math.floor(v.y))\r\n            if (type > 0) {\r\n                return [new Colision(v, type)]\r\n            } else {\r\n                return [new Colision(v, type)]\r\n                    .concat(Ray.cast(map, v, h, null, facing, maxdistance - v.manhattandistance))\r\n            }\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/ray.ts","import {IPoint} from './ipoint';\r\nexport class Colision {\r\n    constructor(\r\n        public point: IPoint,\r\n        public type: number\r\n    ) {\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/colision.ts","import { IPoint } from './ipoint';\r\nexport class DistanceCalc {\r\n    public static getdistance(a: IPoint, b: IPoint) {\r\n        return Math.sqrt(\r\n            (a.x - b.x) * (a.x - b.x) +\r\n            (a.y - b.y) * (a.y - b.y)\r\n        )\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/distancecalc.ts","export class Controls {\r\n    public rotateleft: boolean = false\r\n    public rotateright: boolean = false\r\n    public forward: boolean = false\r\n    public backward: boolean = false\r\n    public run: boolean = false\r\n    public strafeleft: boolean = false\r\n    public straferight: boolean = false\r\n    public mouserotateleft: number = 0\r\n    public mouserotateright: number = 0\r\n\r\n    public mousemove(e: MouseEvent) {\r\n        if (e.movementX < 0) {\r\n            this.mouserotateleft = -e.movementX / 5\r\n            this.mouserotateright = 0\r\n        } else if (e.movementX > 0) {\r\n            this.mouserotateleft = 0\r\n            this.mouserotateright = e.movementX / 5\r\n        }\r\n    }\r\n\r\n    public resetmouserotate() {\r\n        this.mouserotateleft = 0\r\n        this.mouserotateright = 0\r\n    }\r\n\r\n    public keydown(e: KeyboardEvent) {\r\n        if (e.keyCode == 37) this.rotateleft = true\r\n        if (e.keyCode == 68) this.strafeleft = true\r\n        if (e.keyCode == 39) this.rotateright = true\r\n        if (e.keyCode == 65) this.straferight = true\r\n        if (e.keyCode == 38 || e.keyCode == 87) this.forward = true\r\n        if (e.keyCode == 40 || e.keyCode == 83) this.backward = true\r\n        this.run = e.shiftKey\r\n    }\r\n\r\n    public touchstart(e: TouchEvent) {\r\n        var t = e.touches[0];\r\n        this.touchend(e);\r\n        if (t.pageX < window.innerWidth * 0.333) this.rotateleft = true\r\n        else if (t.pageX < window.innerWidth * 0.666) this.forward = true\r\n        else this.rotateright = true\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    public touchend(e: TouchEvent) {\r\n        this.rotateleft = false\r\n        this.rotateright = false\r\n        this.forward = false\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    public keyup(e: KeyboardEvent) {\r\n        if (e.keyCode == 37) this.rotateleft = false\r\n        if (e.keyCode == 68) this.strafeleft = false\r\n        if (e.keyCode == 39) this.rotateright = false\r\n        if (e.keyCode == 65) this.straferight = false\r\n        if (e.keyCode == 38 || e.keyCode == 87) this.forward = false\r\n        if (e.keyCode == 40 || e.keyCode == 83) this.backward = false\r\n        this.run = e.shiftKey\r\n    }\r\n\r\n    public bindevents(doc: HTMLDocument, canvas: HTMLElement) {\r\n        doc.addEventListener('keydown', (e) => this.keydown(e), false)\r\n        doc.addEventListener('keyup', (e) => this.keyup(e), false)\r\n        doc.addEventListener('pointerlockchange', (e) => { this.lockChangeAlert(doc, canvas) }, false)\r\n        canvas.addEventListener('touchstart', (e) => { this.touchstart(e) }, false)\r\n        canvas.addEventListener('touchend', (e) => { this.touchend(e) }, false)\r\n        canvas.addEventListener('click', (e) => {\r\n            canvas.requestPointerLock = canvas.requestPointerLock\r\n            canvas.requestPointerLock()\r\n        }, false)\r\n    }\r\n\r\n    private mousemovefunction = (e: MouseEvent) => this.mousemove(e)\r\n    private lockChangeAlert(doc: HTMLDocument, canvas: HTMLElement) {\r\n        let canvaselement = <HTMLCanvasElement>document.getElementById('gamecanvas')\r\n        if (doc.pointerLockElement === canvaselement) {\r\n            doc.addEventListener(\"mousemove\", this.mousemovefunction, false)\r\n        } else {\r\n            doc.removeEventListener(\"mousemove\", this.mousemovefunction, false)\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/controls.ts","import { PI2_0 } from './mathconst';\r\n\r\nexport class Angle {\r\n    public angle: number\r\n    public sin: number\r\n    public cos: number\r\n    public tg: number\r\n    public ctg: number\r\n    public dx: number\r\n    public dy: number\r\n\r\n    constructor(angle: number) {\r\n        this.angle = Angle.normalizeangle(angle)\r\n        this.sin = Math.sin(angle)\r\n        this.cos = Math.cos(angle)\r\n        this.tg = this.sin / this.cos\r\n        this.ctg = this.cos / this.sin\r\n        this.dx = this.cos > 0 ? 1 : 0\r\n        this.dy = this.sin > 0 ? 1 : 0\r\n    }\r\n\r\n    public static normalizeangle(angle: number) {\r\n        if(angle < 0) angle += PI2_0\r\n        if(angle > PI2_0) angle -= PI2_0\r\n        return angle\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/angle.ts","export class Map {\r\n    public map: Uint8Array\r\n    public size: number\r\n\r\n    constructor(size: number, randparam: number) {\r\n        this.map = new Uint8Array(size * size)\r\n        this.size = size\r\n\r\n        this.randomize(randparam)\r\n    }\r\n\r\n    public setvalue(x: number, y: number, value: number) {\r\n        let pos = this.size * y + x\r\n        if (pos < this.map.length && pos >= 0) {\r\n            this.map[this.size * y + x] = value\r\n        }\r\n    }\r\n\r\n    public getvalue(x: number, y: number) {\r\n        if (x >= 0 && y >= 0 && x < this.size && y < this.size) {\r\n            let pos = this.size * y + x\r\n            return this.map[pos]\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public randomize(randparam: number) {\r\n        for (let i = 0; i < this.map.length; i++) {\r\n            if (Math.random() < randparam) {\r\n                if (Math.random() < 0.1) {\r\n                    this.map[i] = 5\r\n                } else if (Math.random() < 0.1) {\r\n                    this.map[i] = 4\r\n                } else if (Math.random() < 0.3) {\r\n                    this.map[i] = 3\r\n                } else if (Math.random() < 0.5) {\r\n                    this.map[i] = 2\r\n                } else {\r\n                    this.map[i] = 1\r\n                } \r\n            } else {\r\n                this.map[i] = 0\r\n            }\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/map.ts","import { PI0_5 } from './mathconst';\r\nimport { Map } from './map';\r\nimport { Controls } from './controls';\r\nimport { IPoint } from './ipoint';\r\nimport { Angle } from './angle';\r\n\r\nexport class Player {\r\n\r\n    constructor(\r\n        public position: IPoint,\r\n        public facing: Angle,\r\n        public fov: number) {\r\n    }\r\n\r\n    public getrays(columns: number) {\r\n        var step = this.fov / columns\r\n        var angle = this.facing.angle + this.fov / 2\r\n        var rays = new Array<Angle>()\r\n        for (let i = 0; i < columns; i++) {\r\n            rays.push(new Angle(angle))\r\n            angle -= step\r\n        }\r\n        return rays\r\n    }\r\n\r\n    public rotateleft(delta: number, movement: number) {\r\n        this.facing = new Angle(this.facing.angle + Math.PI * movement * delta / 1200)\r\n    }\r\n\r\n    public rotateright(delta: number, movement: number) {\r\n        this.facing = new Angle(this.facing.angle - Math.PI * movement * delta / 1200)\r\n    }\r\n\r\n    private correctposition(map: Map, position: IPoint): IPoint {\r\n        if (map.getvalue(Math.floor(position.x), Math.floor(this.position.y)) > 0) {\r\n            position.x = this.position.x\r\n        } \r\n        if (map.getvalue(Math.floor(this.position.x), Math.floor(position.y)) > 0) {\r\n            position.y = this.position.y\r\n        }\r\n        return position\r\n    }\r\n\r\n    public moveforward(delta: number, map: Map, run: boolean) {\r\n        let position = {\r\n            x: this.position.x + this.facing.cos * delta / (run ? 250 : 500),\r\n            y: this.position.y + this.facing.sin * delta / (run ? 250 : 500)\r\n        }\r\n        this.position = this.correctposition(map, position)\r\n    }\r\n\r\n    public movebackward(delta: number, map: Map) {\r\n        let position = {\r\n            x: this.position.x - this.facing.cos * delta / 500,\r\n            y: this.position.y - this.facing.sin * delta / 500\r\n        }\r\n        this.position = this.correctposition(map, position)\r\n    }\r\n\r\n    public strafeleft(delta: number, map: Map, run: boolean) {\r\n        let newfacing = new Angle(this.facing.angle - PI0_5)\r\n        let position = {\r\n            x: this.position.x + newfacing.cos * delta / (run ? 250 : 500),\r\n            y: this.position.y + newfacing.sin * delta / (run ? 250 : 500)\r\n        }\r\n        this.position = this.correctposition(map, position)\r\n    }\r\n\r\n    public straferight(delta: number, map: Map, run: boolean) {\r\n        let newfacing = new Angle(this.facing.angle + PI0_5)\r\n        let position = {\r\n            x: this.position.x + newfacing.cos * delta / (run ? 250 : 500),\r\n            y: this.position.y + newfacing.sin * delta / (run ? 250 : 500)\r\n        }\r\n        this.position = this.correctposition(map, position)\r\n    }\r\n\r\n    public initonmap(map: Map) {\r\n        while (map.getvalue(Math.floor(this.position.x), Math.floor(this.position.y)) > 0) {\r\n            this.position.x += 1\r\n        }\r\n    }\r\n\r\n    public getcontrols(controls: Controls, map: Map, delta: number) {\r\n        if (controls.forward) this.moveforward(delta, map, controls.run)\r\n        if (controls.backward) this.movebackward(delta, map)\r\n        if (controls.rotateleft) this.rotateleft(delta, 1)\r\n        if (controls.rotateright) this.rotateright(delta, 1)\r\n        if (controls.mouserotateleft) this.rotateleft(delta, controls.mouserotateleft)\r\n        if (controls.mouserotateright) this.rotateright(delta, controls.mouserotateright)\r\n        if (controls.strafeleft) this.strafeleft(delta, map, controls.run)\r\n        if (controls.straferight) this.straferight(delta, map, controls.run)\r\n        controls.resetmouserotate()\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/player.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles.scss\n// module id = 13\n// module chunks = 0"],"sourceRoot":""}